{"version":3,"file":"zenkai.min.js","sources":["../src/dom/dom-stat.js","../src/dom/dom-parse.js","../src/dom/element-manip.js","../src/dom/dom-create.js","../src/dom/dom-query.js","../src/std/std-parse.js","../src/std/std-datetime.js","../src/std/std-object.js","../src/std/std-string.js","../src/std/std-logic.js","../src/std/std-path.js","../src/utils/uri-utils.js","../src/std/std-convert.js","../src/dom/copy-to-clipboard.js","../src/std/std-ajax.js","../src/std/std-array.js","../src/std/std-math.js","../src/dom/dom-remove.js"],"sourcesContent":["/**\r\n * Gets the window's width\r\n * @memberof DOM\r\n */\r\nexport const windowWidth = () => window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\r\n\r\n/**\r\n * Gets the window's height\r\n * @memberof DOM\r\n */\r\nexport const windowHeight = () => window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;","import { isNullOrUndefined, isString, isIterable, hasOwn, pascalCase, isEmpty, all, some, isCollection } from '@std/index.js';\r\nimport { windowWidth, windowHeight } from './dom-stat.js';\r\n\r\n/* istanbul ignore next */\r\nconst isElementNode = (obj) => !isNullOrUndefined(obj) && obj.nodeType === Node.ELEMENT_NODE;\r\n\r\n/* istanbul ignore next */\r\nconst isDocumentFragmentNode = (obj) => !isNullOrUndefined(obj) && obj.nodeType === Node.DOCUMENT_FRAGMENT_NODE;\r\n\r\n/**\r\n * Verifies that an object is a *Node*\r\n * @param {Element} obj \r\n * @returns {boolean} Value indicating whether the object is an *Node*\r\n * @memberof DOM\r\n */\r\nexport const isNode = (obj) => obj instanceof Node;\r\n\r\n/**\r\n * Verifies that an object is a *NodeList*\r\n * @param {Element} obj \r\n * @returns {boolean} Value indicating whether the object is an *NodeList*\r\n * @memberof DOM\r\n */\r\nexport const isNodeList = (obj) => obj instanceof NodeList;\r\n\r\n/**\r\n * Verifies that an object is an *Element*\r\n * @param {Element} obj \r\n * @returns {boolean} Value indicating whether the object is an *Element*\r\n * @memberof DOM\r\n */\r\nexport const isElement = (obj) => isElementNode(obj) && obj instanceof Element;\r\n\r\n/**\r\n * Verifies that an object is an *HTML Element*\r\n * @param {Element} obj \r\n * @param {string|string[]|string[][]} [kind] \r\n * @returns {boolean} Value indicating whether the object is an *HTMLElement*\r\n * @memberof DOM\r\n */\r\nexport const isHTMLElement = (obj, kind) => {\r\n    if (!(isElementNode(obj) && obj instanceof HTMLElement)) {\r\n        return false;\r\n    }\r\n\r\n    if (isIterable(kind)) {\r\n        return isHTMLElementKind(obj, Array.isArray(kind) ? kind : [kind]);\r\n    }\r\n\r\n    return true;\r\n};\r\n\r\nconst TagNameMapping = {\r\n    'a': \"Anchor\",\r\n    'br': \"BR\",\r\n    'dl': \"DList\",\r\n    'datalist': \"DataList\",\r\n    'fieldset': \"FieldSet\",\r\n    'frameset': \"FrameSet\",\r\n    'hr': \"HR\",\r\n    'h1': \"Heading\",\r\n    'h2': \"Heading\",\r\n    'h3': \"Heading\",\r\n    'h4': \"Heading\",\r\n    'h5': \"Heading\",\r\n    'h6': \"Heading\",\r\n    'li': \"LI\",\r\n    'ol': \"OList\",\r\n    'optgroup': \"OptGroup\",\r\n    'p': \"Paragraph\",\r\n    'q': \"Quote\",\r\n    'blockquote': \"Quote\",\r\n    'caption': \"TableCaption\",\r\n    'td': \"TableCell\",\r\n    'th': \"TableCell\",\r\n    'col': \"TableCol\",\r\n    'tr': \"TableRow\",\r\n    'tbody': \"TableSection\",\r\n    'thead': \"TableSection\",\r\n    'tfoot': \"TableSection\",\r\n    'textarea': \"TextArea\",\r\n    'ul': \"UList\",\r\n};\r\n\r\n/**\r\n * Verifies the tag of an *HTML Element*\r\n * @param {HTMLElement} element \r\n * @param {string[]|string[][]} kinds\r\n * @returns {boolean}\r\n * @private\r\n */\r\nfunction isHTMLElementKind(element, kinds) {\r\n    const isInstanceOf = (obj) => element instanceof obj;\r\n    const hasTag = (tag) => element.tagName === tag.toUpperCase();\r\n    const isOfType = (type) => Array.isArray(type) ? type.includes(element.type) : element.type === type;\r\n    \r\n    return kinds.some((kind) => {\r\n        if (!isIterable(kind)) {\r\n            return false;\r\n        }\r\n\r\n        var name = kind;\r\n        var type = null;\r\n        \r\n        if (Array.isArray(kind)) {\r\n            [name, type] = kind;\r\n        }\r\n\r\n        name = name.toLowerCase();\r\n        var interfaceName = `HTML${hasOwn(TagNameMapping, name) ? TagNameMapping[name] : pascalCase(name)}Element`;\r\n\r\n        if (!(isInstanceOf(window[interfaceName]) || hasTag(name))) {\r\n            return false;\r\n        }\r\n\r\n        if (isCollection(type) && !isEmpty(type)) {\r\n            return isOfType(type);\r\n        }\r\n\r\n        return true;\r\n    });\r\n}\r\n\r\n/**\r\n * Verifies that an object is an *HTMLCollection*\r\n * @param {Element} obj \r\n * @returns {boolean} Value indicating whether the object is an *HTMLCollection*\r\n * @memberof DOM\r\n */\r\nexport const isHTMLCollection = (obj) => obj instanceof HTMLCollection;\r\n\r\n/**\r\n * Verifies that an object is an *DocumentFragment*\r\n * @param {Element} obj \r\n * @returns {boolean} Value indicating whether the object is an *DocumentFragment*\r\n * @memberof DOM\r\n */\r\nexport const isDocumentFragment = (obj) => isDocumentFragmentNode(obj) && obj instanceof DocumentFragment;\r\n\r\n/**\r\n * Converts an html string to an HTML Element or a list of HTML Elements\r\n * @param {!string} prop \r\n * @param {!string} html \r\n * @private\r\n */\r\n/* istanbul ignore next */\r\nfunction _htmlToElement(prop, html) {\r\n    if (!isString(html)) {\r\n        return null;\r\n    }\r\n\r\n    var template = document.createElement('template');\r\n    template.innerHTML = html.trim();\r\n\r\n    return template.content[prop];\r\n}\r\n\r\n/**\r\n * Converts an html string to an HTML Element\r\n * @param {!string} html \r\n * @returns {Node}\r\n * @memberof DOM\r\n */\r\nexport const htmlToElement = _htmlToElement.bind(null, 'firstChild');\r\n\r\n/**\r\n * Converts an html string to a list of HTML Elements\r\n * @param {!string} html \r\n * @returns {NodeList}\r\n * @memberof DOM\r\n */\r\nexport const htmlToElements = _htmlToElement.bind(null, 'childNodes');\r\n\r\n/**\r\n * Verifies that an element is visible\r\n * @param {!HTMLElement} element \r\n * @returns {boolean}\r\n * @memberof DOM\r\n */\r\nexport function isInViewport(element) {\r\n    if (!isHTMLElement(element)) {\r\n        throw new TypeError(\"Bad argument: The given 'element' is not a valid HTML Element\");\r\n    }\r\n\r\n    const { top, right, bottom, left } = element.getBoundingClientRect();\r\n\r\n    return top >= 0 && left >= 0 && bottom <= windowHeight() && right <= windowWidth();\r\n}\r\n\r\n/**\r\n * Verifies that an element is displayed inside a target element\r\n * @param {!HTMLElement} element \r\n * @param {!HTMLElement} target\r\n * @returns {boolean}\r\n * @memberof DOM\r\n */\r\nexport function isInElement(element, target) {\r\n    if (!all([element, target], isHTMLElement)) {\r\n        throw new TypeError(\"Bad argument: The given 'element' is not a valid HTML Element\");\r\n    }\r\n\r\n    const { top: top1, right: right1, bottom: bottom1, left: left1 } = element.getBoundingClientRect();\r\n    const { top: top2, right: right2, bottom: bottom2, left: left2 } = target.getBoundingClientRect();\r\n\r\n    return all([[top2, top1], [left2, left1], [right1, right2], [bottom1, bottom2]], (inner, outer) => inner <= outer);\r\n}\r\n\r\n\r\n\r\n/**\r\n * Computes the delta\r\n * @param {number} x \r\n * @param {number} y \r\n */\r\nconst delta = (x, y) => Math.abs(x - y);\r\n\r\nconst margin = {\r\n    \"top\": (style) => style.marginTop,\r\n    \"right\": (style) => style.marginRight,\r\n    \"bottom\": (style) => style.marginBottom,\r\n    \"left\": (style) => style.marginLeft,\r\n};\r\n\r\nconst padding = {\r\n    \"top\": (style) => style.paddingTop,\r\n    \"right\": (style) => style.paddingRight,\r\n    \"bottom\": (style) => style.paddingBottom,\r\n    \"left\": (style) => style.paddingLeft,\r\n};\r\n\r\nconst border = {\r\n    \"top\": (style) => style.borderTopWidth,\r\n    \"right\": (style) => style.borderRightWidth,\r\n    \"bottom\": (style) => style.borderBottomWidth,\r\n    \"left\": (style) => style.borderLeftWidth,\r\n};\r\n\r\n\r\n/**\r\n * Verifies if an element is the closest to a direction of a container\r\n * @param {HTMLElement} source \r\n * @param {HTMLElement} container \r\n * @param {string} dir \r\n */\r\nfunction isClosestTo(source, container, dir) {\r\n    const sourceStyle = window.getComputedStyle(source);\r\n    const containerStyle = window.getComputedStyle(container);\r\n\r\n    const sourceMargin = margin[dir](sourceStyle);\r\n    const containerPadding = padding[dir](containerStyle);\r\n    const containerBorder = border[dir](containerStyle);\r\n\r\n    let sourceDistance = source.getBoundingClientRect()[dir] + pixelToNumber(sourceMargin);\r\n    let containerDistance = container.getBoundingClientRect()[dir] - pixelToNumber(containerPadding) - pixelToNumber(containerBorder);\r\n\r\n    return delta(sourceDistance, containerDistance) < 2;\r\n}\r\n\r\n\r\n/**\r\n * Gets the first visible element\r\n * @param {HTMLElement} parent \r\n */\r\nexport function getVisibleElement(parent) {\r\n    for (let i = 0; i < parent.children.length; i++) {\r\n        const element = parent.children[i];\r\n\r\n        if (!isHidden(element)) {\r\n            return element;\r\n        }\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\n/**\r\n * Get closest element from a direction inside an optional container\r\n * @param {HTMLElement} source \r\n * @param {string} dir \r\n * @param {HTMLElement} container \r\n * @param {boolean} relative \r\n */\r\nexport function getClosest(source, dir, container, relative) {\r\n    if (dir === \"up\") {\r\n        return getElementTop(source, container, relative);\r\n    } else if (dir === \"down\") {\r\n        return getElementBottom(source, container, relative);\r\n    } else if (dir === \"left\") {\r\n        return getElementLeft(source, container, relative);\r\n    } else if (dir === \"right\") {\r\n        return getElementRight(source, container, relative);\r\n    }\r\n\r\n    console.error(\"unknown direction\", dir);\r\n\r\n    return null;\r\n}\r\n\r\n\r\n/**\r\n * Get closest element above a source element inside an optional container\r\n * @param {HTMLElement} source \r\n * @param {HTMLElement} container \r\n * @param {boolean} relative \r\n */\r\nexport function getElementTop(source, container, relative = true) {\r\n    const items = container.children;\r\n\r\n    const { top: top1, left: left1 } = source.getBoundingClientRect();\r\n\r\n    if (relative && isClosestTo(source, container, \"top\")) {\r\n        return null;\r\n    }\r\n\r\n    let closest = null;\r\n\r\n    let vdist = 99999;\r\n    let hdist = 99999;\r\n\r\n    for (let i = 0; i < items.length; i++) {\r\n        const item = items[i];\r\n\r\n        if (isHidden(item) || item.classList.contains(\"badge\") || item === source) {\r\n            continue;\r\n        }\r\n\r\n        const { bottom: bottom2, left: left2 } = item.getBoundingClientRect();\r\n\r\n        let $vdist = Math.abs(top1 - bottom2);\r\n        let $hdist = Math.abs(left1 - left2);\r\n\r\n        if (top1 >= (bottom2 - 1) && ($vdist < vdist || ($vdist === vdist && $hdist < hdist))) {\r\n            closest = item;\r\n            vdist = $vdist;\r\n            hdist = $hdist;\r\n        }\r\n    }\r\n\r\n    return closest;\r\n}\r\n\r\n\r\n\r\n/**\r\n * Get closest element on the left of a source element inside an optional container\r\n * @param {HTMLElement} source \r\n * @param {HTMLElement} container \r\n */\r\nexport function getElementLeft(source, container, relative = true) {\r\n    const items = container.children;\r\n\r\n    const { top: top1, left: left1 } = source.getBoundingClientRect();\r\n\r\n    if (relative && isClosestTo(source, container, \"left\")) {\r\n        return null;\r\n    }\r\n\r\n    let closest = null;\r\n\r\n    let vdist = 99999;\r\n    let hdist = 99999;\r\n\r\n    for (let i = 0; i < items.length; i++) {\r\n        const item = items[i];\r\n\r\n        if (isHidden(item) || item.classList.contains(\"badge\") || item === source) {\r\n            continue;\r\n        }\r\n\r\n        const { top: top2, right: right2 } = item.getBoundingClientRect();\r\n\r\n        let $vdist = Math.abs(top1 - top2);\r\n        let $hdist = Math.abs(left1 - right2);\r\n\r\n        if (left1 >= (right2 - 1) && ($hdist < hdist || ($hdist === hdist && $vdist < vdist))) {\r\n            closest = item;\r\n            vdist = $vdist;\r\n            hdist = $hdist;\r\n        }\r\n    }\r\n\r\n    return closest;\r\n}\r\n\r\n/**\r\n * Get closest element on the right of a source element inside an optional container\r\n * @param {HTMLElement} source \r\n * @param {HTMLElement} container \r\n */\r\nexport function getElementRight(source, container, relative = true) {\r\n    const items = container.children;\r\n\r\n    const { top: top1, right: right1 } = source.getBoundingClientRect();\r\n\r\n    if (relative && isClosestTo(source, container, \"right\")) {\r\n        return null;\r\n    }\r\n\r\n    let closest = null;\r\n\r\n    let vdist = 99999;\r\n    let hdist = 99999;\r\n\r\n    for (let i = 0; i < items.length; i++) {\r\n        const item = items[i];\r\n\r\n        if (isHidden(item) || item.classList.contains(\"badge\") || item === source) {\r\n            continue;\r\n        }\r\n\r\n        const { top: top2, left: left2 } = item.getBoundingClientRect();\r\n\r\n        let $vdist = Math.abs(top1 - top2);\r\n        let $hdist = Math.abs(right1 - left2);\r\n\r\n        if (right1 <= (left2 + 1) && ($hdist < hdist || ($hdist === hdist && $vdist < vdist))) {\r\n            closest = item;\r\n            vdist = $vdist;\r\n            hdist = $hdist;\r\n        }\r\n    }\r\n\r\n    return closest;\r\n}\r\n\r\n\r\n/**\r\n * Get closest element below a source element inside an optional container\r\n * @param {HTMLElement} source \r\n * @param {HTMLElement} container \r\n */\r\nexport function getElementBottom(source, container, relative = true) {\r\n    const items = container.children;\r\n\r\n    const { bottom: bottom1, left: left1 } = source.getBoundingClientRect();\r\n\r\n    if (relative && isClosestTo(source, container, \"bottom\")) {\r\n        return null;\r\n    }\r\n\r\n    let closest = null;\r\n\r\n    let vdist = 99999;\r\n    let hdist = 99999;\r\n\r\n    for (let i = 0; i < items.length; i++) {\r\n        const item = items[i];\r\n\r\n        if (isHidden(item) || item.classList.contains(\"badge\") || item === source) {\r\n            continue;\r\n        }\r\n\r\n        const { top: top2, left: left2 } = item.getBoundingClientRect();\r\n\r\n        let $vdist = Math.abs(bottom1 - top2);\r\n        let $hdist = Math.abs(left1 - left2);\r\n\r\n        if (bottom1 <= (top2 + 1) && ($vdist < vdist || ($vdist === vdist && $hdist < hdist))) {\r\n            closest = item;\r\n            vdist = $vdist;\r\n            hdist = $hdist;\r\n        }\r\n    }\r\n\r\n    return closest;\r\n}\r\n\r\n\r\n/**\r\n * Returns the closest element to the top of its parent container\r\n * @param {HTMLElement} container \r\n * @returns {HTMLElement|null} The closest element to the top.\r\n */\r\nexport function getTopElement(container, pred) {\r\n    const items = container.children;\r\n\r\n    const { top: top1, left: left1 } = container.getBoundingClientRect();\r\n\r\n    if (items.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    const usePred = isFunction(pred);\r\n    let closest = null;\r\n\r\n    let vdist = 99999;\r\n    let hdist = 99999;\r\n\r\n    for (let i = 0; i < items.length; i++) {\r\n        const item = items[i];\r\n\r\n        if (usePred && !pred(item)) {\r\n            continue;\r\n        }\r\n\r\n        if (isHidden(item) || item.classList.contains(\"badge\")) {\r\n            continue;\r\n        }\r\n\r\n        const { top: top2, left: left2 } = item.getBoundingClientRect();\r\n\r\n        let $vdist = Math.abs(top1 - top2);\r\n        let $hdist = Math.abs(left1 - left2);\r\n\r\n        if (top1 <= (top2 + 1) && ($vdist < vdist || ($vdist === vdist && $hdist < hdist))) {\r\n            closest = item;\r\n            vdist = $vdist;\r\n            hdist = $hdist;\r\n        }\r\n    }\r\n\r\n    return closest;\r\n}\r\n\r\n/**\r\n * Returns the closest element to the left side of its parent container\r\n * @param {HTMLElement} container \r\n * @returns {HTMLElement|null} The closest element to the left side.\r\n */\r\nexport function getLeftElement(container, pred) {\r\n    const items = container.children;\r\n\r\n    const { top: top1, left: left1 } = container.getBoundingClientRect();\r\n\r\n    if (items.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    const usePred = isFunction(pred);\r\n    let closest = null;\r\n\r\n    let vdist = 99999;\r\n    let hdist = 99999;\r\n\r\n    for (let i = 0; i < items.length; i++) {\r\n        const item = items[i];\r\n\r\n        if (usePred && !pred(item)) {\r\n            continue;\r\n        }\r\n\r\n        if (isHidden(item) || item.classList.contains(\"badge\")) {\r\n            continue;\r\n        }\r\n\r\n        const { top: top2, left: left2 } = item.getBoundingClientRect();\r\n\r\n        let $vdist = Math.abs(top1 - top2);\r\n        let $hdist = Math.abs(left1 - left2);\r\n\r\n        if (left1 <= (left2 + 1) && ($hdist < hdist || ($hdist === hdist && $vdist < vdist))) {\r\n            closest = item;\r\n            vdist = $vdist;\r\n            hdist = $hdist;\r\n        }\r\n    }\r\n\r\n    return closest;\r\n}\r\n\r\n/**\r\n * Returns the closest element to the right side of its parent container\r\n * @param {HTMLElement} container \r\n * @returns {HTMLElement|null} The closest element to the right side.\r\n */\r\nexport function getRightElement(container, pred) {\r\n    const items = container.children;\r\n\r\n    const { top: top1, right: right1 } = container.getBoundingClientRect();\r\n\r\n    if (items.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    const usePred = isFunction(pred);\r\n    let closest = null;\r\n\r\n    let vdist = 99999;\r\n    let hdist = 99999;\r\n\r\n    for (let i = 0; i < items.length; i++) {\r\n        const item = items[i];\r\n\r\n        if (usePred && !pred(item)) {\r\n            continue;\r\n        }\r\n\r\n        if (isHidden(item) || item.classList.contains(\"badge\")) {\r\n            continue;\r\n        }\r\n\r\n        const { top: top2, right: right2 } = item.getBoundingClientRect();\r\n\r\n        let $vdist = Math.abs(top1 - top2);\r\n        let $hdist = Math.abs(right1 - right2);\r\n\r\n        if (right1 >= (right2 - 1) && ($hdist < hdist || ($hdist === hdist && $vdist < vdist))) {\r\n            closest = item;\r\n            vdist = $vdist;\r\n            hdist = $hdist;\r\n        }\r\n    }\r\n\r\n    return closest;\r\n}\r\n\r\n/**\r\n * Returns the closest element to the bottom of its parent container\r\n * @param {HTMLElement} container \r\n * @returns {HTMLElement|null} The closest element to the bottom.\r\n */\r\nexport function getBottomElement(container, pred) {\r\n    const items = container.children;\r\n\r\n    const { bottom: bottom1, left: left1 } = container.getBoundingClientRect();\r\n\r\n    if (items.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    const usePred = isFunction(pred);\r\n    let closest = null;\r\n\r\n    let vdist = 99999;\r\n    let hdist = 99999;\r\n\r\n    for (let i = 0; i < items.length; i++) {\r\n        const item = items[i];\r\n\r\n        if (usePred && !pred(item)) {\r\n            continue;\r\n        }\r\n\r\n        if (isHidden(item) || item.classList.contains(\"badge\")) {\r\n            continue;\r\n        }\r\n\r\n        const { bottom: bottom2, left: left2 } = item.getBoundingClientRect();\r\n\r\n        let $vdist = Math.abs(bottom1 - bottom2);\r\n        let $hdist = Math.abs(left1 - left2);\r\n\r\n        if (bottom1 >= (bottom2 - 1) && ($vdist < vdist || ($vdist === vdist && $hdist < hdist))) {\r\n            closest = item;\r\n            vdist = $vdist;\r\n            hdist = $hdist;\r\n        }\r\n    }\r\n\r\n    return closest;\r\n}\r\n","import { isObject, isNullOrUndefined, isIterable, isNullOrWhitespace, isString } from '@std/index.js';\r\nimport { isHTMLElement } from './dom-parse.js';\r\n\r\n\r\n/**\r\n * Removes additional spaces in class attribute\r\n * @param {string} val class attribute's value\r\n * @returns {string} formatted value\r\n * @private\r\n */\r\nconst formatClass = (val) => val.replace(/\\s+/g, ' ').trim();\r\n\r\n\r\n/**\r\n * Add classes to an element\r\n * @param {HTMLElement} element \r\n * @param {string|string[]} value \r\n * @private\r\n * @memberof DOM\r\n */\r\nfunction addClass(element, value) {\r\n    if (!isIterable(value)) {\r\n        throw new TypeError(\"Bad argument: The passed `value` argument is not a string or array\");\r\n    }\r\n\r\n    if (Array.isArray(value)) {\r\n        element.classList.add(...value);\r\n    } else {\r\n        let formattedValue = formatClass(value);\r\n\r\n        if (isNullOrWhitespace(element.className)) {\r\n            element.className = formattedValue;\r\n        } else {\r\n            addClass(element, formattedValue.split(' '));\r\n        }\r\n    }\r\n\r\n    return element;\r\n}\r\n\r\n/**\r\n * Assigns a value to an attribute\r\n * @param {HTMLElement} element \r\n * @param {string} key \r\n * @param {string} value \r\n * @private\r\n */\r\nfunction assign(element, key, value) {\r\n    element[key] = value;\r\n}\r\n\r\n/**\r\n * Assigns a value to an attribute\r\n * @param {HTMLElement} element \r\n * @param {string} key \r\n * @param {Object} value \r\n * @private\r\n */\r\nfunction assignObject(element, key, value) {\r\n    Object.assign(element[key], value);\r\n}\r\n\r\n/**\r\n * Assigns a value to an attribute\r\n * @param {HTMLElement} element \r\n * @param {string} key \r\n * @param {Object} value \r\n * @private\r\n */\r\nfunction assignAttribute(element, key, value) {\r\n    element.setAttribute(key, value);\r\n}\r\n\r\nconst GLOBAL_ATTRIBUTES = \"accesskey,autocapitalize,class,dataset,editable,draggable,hidden,id,inputmode,lang,style,tabindex,title\";\r\n\r\nconst AttributeHandler = {\r\n    // Global attributes\r\n    accesskey: [assign, 'accessKey'],\r\n    autocapitalize: [assign, 'autocapitalize'],\r\n    class: [addClass],\r\n    dataset: [assignObject, 'dataset'],\r\n    draggable: [assign, 'draggable'],\r\n    editable: [assign, 'contentEditable'],\r\n    hidden: [assign, 'hidden'],\r\n    id: [assign, 'id'],\r\n    inputmode: [assign, 'inputMode'],\r\n    lang: [assign, 'lang'],\r\n    html: [assign, 'innerHTML'],\r\n    style: [assign, 'style'],\r\n    tabindex: [assign, 'tabIndex'],\r\n    text: [assign, 'textContent'],\r\n    title: [assign, 'title'],\r\n    // Anchor attributes\r\n    download: [assign, 'download'],\r\n    ping: [assign, 'ping'],\r\n    target: [assign, 'target'],\r\n    // Area attributes\r\n    coords: [assign, 'coords'],\r\n    shape: [assign, 'shape'],\r\n    // Audio/Video attributes\r\n    autoplay: [assign, 'autoplay'],\r\n    buffered: [assign, 'buffered'],\r\n    controls: [assign, 'controls'],\r\n    loop: [assign, 'loop'],\r\n    muted: [assign, 'muted'],\r\n    playsinline: [assignAttribute, 'playsinline'],\r\n    poster: [assign, 'poster'],\r\n    preload: [assign, 'preload'],\r\n    // Form attributes\r\n    accept: [assign, 'accept'],\r\n    \"accept-charset\": [assign, 'acceptCharset'],\r\n    action: [assign, 'action'],\r\n    autocomplete: [assign, 'autocomplete'],\r\n    autofocus: [assign, 'autofocus'],\r\n    capture: [assign, 'capture'],\r\n    checked: [assign, 'checked'],\r\n    cols: [assign, 'cols'],\r\n    disabled: [assign, 'disabled'],\r\n    dirname: [assign, 'dirName'],\r\n    enctype: [assign, 'enctype'],\r\n    for: [assign, 'htmlFor'],\r\n    form: [assign, 'form'],\r\n    formaction: [assign, 'formAction'],\r\n    formenctype: [assign, 'formEnctype'],\r\n    formmethod: [assign, 'formMethod'],\r\n    formnovalidate: [assign, 'formNoValidate'],\r\n    formtarget: [assign, 'formTarget'],\r\n    high: [assign, 'high'],\r\n    label: [assign, 'label'],\r\n    list: [assign, 'list'],\r\n    low: [assign, 'low'],\r\n    max: [assign, 'max'],\r\n    maxlength: [assign, 'maxLength'],\r\n    method: [assign, 'method'],\r\n    min: [assign, 'min'],\r\n    minlength: [assign, 'minLength'],\r\n    multiple: [assign, 'multiple'],\r\n    novalidate: [assign, 'noValidate'],\r\n    optimum: [assign, 'optimum'],\r\n    pattern: [assign, 'pattern'],\r\n    placeholder: [assign, 'placeholder'],\r\n    readonly: [assign, 'readOnly'],\r\n    required: [assign, 'required'],\r\n    rows: [assign, 'rows'],\r\n    selected: [assign, 'selected'],\r\n    size: [assign, 'size'],\r\n    spellcheck: [assignAttribute, 'spellcheck'],\r\n    step: [assign, 'step'],\r\n    wrap: [assign, 'wrap'],\r\n    // Image attributes\r\n    crossorigin: [assign, 'crossOrigin'],\r\n    decoding: [assign, 'decoding'],\r\n    height: [assign, 'height'],\r\n    ismap: [assign, 'isMap'],\r\n    loading: [assign, 'loading'],\r\n    srcset: [assign, 'srcset'],\r\n    width: [assign, 'width'],\r\n    // Link attributes\r\n    alt: [assign, 'alt'],\r\n    as: [assign, 'as'],\r\n    media: [assign, 'media'],\r\n    rel: [assign, 'rel'],\r\n    src: [assign, 'src'],\r\n    sizes: [assign, 'sizes'],\r\n    // List attributes\r\n    reversed: [assign, 'reversed'],\r\n    start: [assign, 'start'],\r\n    // Meta attributes\r\n    charset: [assignAttribute, 'charset'],\r\n    content: [assign, 'content'],\r\n    \"http-equiv\": [assign, 'httpEquiv'],\r\n    // Object attributes\r\n    data: [assign, 'data'],\r\n    // Quote attributes\r\n    cite: [assign, 'cite'],\r\n    // Table attributes\r\n    abbr: [assign, 'abbr'],\r\n    colspan: [assign, 'colSpan'],\r\n    span: [assign, 'span'],\r\n    rowspan: [assign, 'rowSpan'],\r\n    scope: [assign, 'scope'],\r\n    // Track attributes\r\n    default: [assign, 'default'],\r\n    kind: [assign, 'kind'],\r\n    srclang: [assign, 'srclang'],\r\n    // Mix attributes\r\n    href: [assign, 'href'],\r\n    hreflang: [assign, 'hreflang'],\r\n    datetime: [assign, 'dateTime'],\r\n    name: [assign, 'name'],\r\n    type: [assign, 'type'],\r\n    value: [assign, 'value'],\r\n    usemap: [assign, 'useMap'],\r\n};\r\n\r\n\r\n/**\r\n * Sets the attributes of an element\r\n * @param {!HTMLElement} element element\r\n * @param {Object} attribute attribute\r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport function addAttributes(element, attribute, validAttributes) {\r\n    if (!isHTMLElement(element)) {\r\n        throw new TypeError(\"Bad argument: The given 'element' argument is not a valid HTML Element\");\r\n    }\r\n\r\n    if (!isObject(attribute)) {\r\n        return element;\r\n    }\r\n\r\n    const isValid = (key) => GLOBAL_ATTRIBUTES.includes(key) || isNullOrUndefined(validAttributes) || validAttributes.includes(key);\r\n\r\n    for (const key of Object.keys(attribute)) {\r\n        if (isValid(key)) {\r\n            let value = attribute[key];\r\n            let args = AttributeHandler[key].slice(0);\r\n            let fn = args.shift();\r\n\r\n            if (!isNullOrUndefined(value)) {\r\n                fn(element, ...args, value);\r\n            }\r\n        }\r\n    }\r\n\r\n    return element;\r\n}\r\n\r\n/**\r\n * Changes the selected option of a `<select>` element\r\n * @param {!HTMLSelectElement} select\r\n * @param {!string} optValue option value to select\r\n * @returns {boolean} value indicating whether the option was found and selected\r\n * @memberof DOM\r\n */\r\nexport function changeSelectedValue(select, optValue) {\r\n    if (!isHTMLElement(select, \"select\")) {\r\n        throw new TypeError(\"Bad argument: The given 'select' argument is not a valid HTML Select element\");\r\n    }\r\n\r\n    if (!(isString(optValue) || isObject(optValue))) {\r\n        throw new TypeError(\"Bad argument: The given 'optValue' argument is a null or undefined\");\r\n    }\r\n\r\n    /**\r\n     * Object equality\r\n     * @param {HTMLOptionElement} option \r\n     * @param {*} obj \r\n     */\r\n    const objectEq = (option, obj) => option.value === obj.value || option.text === obj.text;\r\n\r\n    /**\r\n     * String equality\r\n     * @param {HTMLOptionElement} option \r\n     * @param {string} obj \r\n     */\r\n    const stringEq = (option, value) => option.value === value;\r\n\r\n    const eqHandler = isString(optValue) ? stringEq : objectEq;\r\n\r\n    const { options, multiple } = select;\r\n\r\n    for (let i = 0; i < options.length; i++) {\r\n        let option = options[i];\r\n\r\n        if (eqHandler(option, optValue)) {\r\n            if (!multiple) {\r\n                Array.from(select.selectedOptions).forEach(opt => opt.selected = false);\r\n            }\r\n            option.selected = true;\r\n\r\n            return true;\r\n        }\r\n    }\r\n\r\n    return false;\r\n}","import { isNullOrUndefined, isObject, valOrDefault, isIterable, isString } from \"@std/index.js\";\r\nimport { isHTMLElement, isNode } from \"./dom-parse.js\";\r\nimport { addAttributes } from \"./element-manip.js\";\r\n\r\n\r\n/**\r\n * Creates an empty element with attributes\r\n * @param {string} tagName \r\n * @param {string} [_validAttributes] \r\n * @param {object} [_attributes] \r\n * @returns {HTMLElement}\r\n * @private\r\n */\r\n/* istanbul ignore next */\r\nfunction createEmptyElement(tagName, _validAttributes, _attributes) {\r\n    const element = document.createElement(tagName);\r\n\r\n    if (!isHTMLElement(element)) {\r\n        return null;\r\n    }\r\n\r\n    if (isObject(_attributes)) {\r\n        addAttributes(element, _attributes, valOrDefault(_validAttributes, \"\"));\r\n    }\r\n\r\n    return element;\r\n}\r\n\r\n/**\r\n * Creates an element with attributes and content\r\n * @param {string} tagName \r\n * @param {string} [_validAttributes] \r\n * @param {Function} [contentResolver] \r\n * @param {object} [_attributes] \r\n * @param {Text|HTMLElement|HTMLElement[]} [_content] \r\n * @returns {HTMLElement}\r\n * @private\r\n */\r\n/* istanbul ignore next */\r\nfunction createElement(tagName, _validAttributes, _attributes, _content) {\r\n    const element = createEmptyElement(tagName, _validAttributes, _attributes);\r\n\r\n    if (!isHTMLElement(element)) {\r\n        return null;\r\n    }\r\n\r\n    if (!isNullOrUndefined(_content)) {\r\n        addContent(element, _content);\r\n    }\r\n\r\n    return element;\r\n}\r\n\r\n\r\n// TODO: createScript\r\n\r\n// TODO: createStyle\r\n\r\n/**\r\n * Creates a document fragment\r\n * @function createDocFragment\r\n * @returns {DocumentFragment}\r\n * @memberof DOM\r\n */\r\nexport function createDocFragment(_children) {\r\n    var fragment = document.createDocumentFragment();\r\n\r\n    if (!isNullOrUndefined(_children)) {\r\n        addContent(fragment, _children);\r\n    }\r\n\r\n    return fragment;\r\n}\r\n\r\n/**\r\n * Creates a text node\r\n * @function createTextNode\r\n * @param {string} text\r\n * @returns {Text}\r\n * @memberof DOM\r\n */\r\nexport const createTextNode = (text) => document.createTextNode(text);\r\n\r\n\r\n/******************************************************************************\r\n * Metadata Element\r\n *****************************************************************************/\r\n\r\n/**\r\n * Creates an `<base>` element with some attributes\r\n * @function createBase\r\n * @param {object} _attribute \r\n * @returns {HTMLBaseElement}\r\n * @memberof DOM\r\n */\r\nexport const createBase = createEmptyElement.bind(null, \"base\", \"href,target\");\r\n\r\n/**\r\n * Creates a `<link>` element with some attributes\r\n * @function createLink\r\n * @param {object} _attribute Global attributes\r\n * @returns {HTMLLinkElement}\r\n * @memberof DOM\r\n */\r\nexport const createLink = createEmptyElement.bind(null, \"link\", \"as,crossorigin,disabled,href,hreflang,media,rel,sizes,type\");\r\n\r\n/**\r\n * Creates a `<meta>` element with some attributes\r\n * @function createLink\r\n * @param {object} _attribute Global attributes\r\n * @returns {HTMLMetaElement}\r\n * @memberof DOM\r\n */\r\nexport const createMeta = createEmptyElement.bind(null, \"meta\", \"charset,content,http-equiv,name\");\r\n\r\n/**\r\n * Creates a `<title>` element with some attributes\r\n * @function createTemplate\r\n * @param {object} _attribute Global attributes\r\n * @param {Text|HTMLElement|HTMLElement[]} _children Content\r\n * @returns {HTMLTitleElement}\r\n * @memberof DOM\r\n */\r\nexport const createTitle = createElement.bind(null, \"title\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<template>` element with some attributes\r\n * @function createTemplate\r\n * @param {object} _attribute Global attributes\r\n * @param {Text|HTMLElement|HTMLElement[]} _children Content\r\n * @returns {HTMLTemplateElement}\r\n * @memberof DOM\r\n */\r\nexport const createTemplate = createElement.bind(null, \"template\", \"html,text\");\r\n\r\n\r\n/******************************************************************************\r\n * Sectionning Element\r\n *****************************************************************************/\r\n\r\n/**\r\n * Creates a `<header>` element with some attributes\r\n * @function createHeader\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createHeader = createElement.bind(null, \"header\", \"html,text\");\r\n\r\n/**\r\n * Creates an `<footer>` element with some attributes\r\n * @function createFooter\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createFooter = createElement.bind(null, \"footer\", \"html,text\");\r\n\r\n/**\r\n * Creates an `<main>` element with some attributes\r\n * @function createMain\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createMain = createElement.bind(null, \"main\", \"html,text\");\r\n\r\n/**\r\n * Creates an `<article>` element with some attributes\r\n * @function createArticle\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createArticle = createElement.bind(null, \"article\", \"html,text\");\r\n\r\n/**\r\n * Creates an `<section>` element with some attributes\r\n * @function createSection\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createSection = createElement.bind(null, \"section\", \"html,text\");\r\n\r\n/**\r\n * Creates an `<nav>` element with some attributes\r\n * @function createNav\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createNav = createElement.bind(null, \"nav\", \"html,text\");\r\n\r\n/**\r\n * Creates an `<aside>` element with some attributes\r\n * @function createAside\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createAside = createElement.bind(null, \"aside\", \"html,text\");\r\n\r\n\r\n/******************************************************************************\r\n * Heading Element\r\n *****************************************************************************/\r\n\r\n/**\r\n * Creates a `<h1>` element with some attributes\r\n * @function createH1\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLHeadingElement}\r\n * @memberof DOM\r\n */\r\nexport const createH1 = createElement.bind(null, \"h1\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<h2>` element with some attributes\r\n * @function createH2\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLHeadingElement}\r\n * @memberof DOM\r\n */\r\nexport const createH2 = createElement.bind(null, \"h2\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<h3>` element with some attributes\r\n * @function createH3\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLHeadingElement}\r\n * @memberof DOM\r\n */\r\nexport const createH3 = createElement.bind(null, \"h3\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<h4>` element with some attributes\r\n * @function createH4\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLHeadingElement}\r\n * @memberof DOM\r\n */\r\nexport const createH4 = createElement.bind(null, \"h4\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<h5>` element with some attributes\r\n * @function createH5\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLHeadingElement}\r\n * @memberof DOM\r\n */\r\nexport const createH5 = createElement.bind(null, \"h5\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<h6>` element with some attributes\r\n * @function createH6\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLHeadingElement}\r\n * @memberof DOM\r\n */\r\nexport const createH6 = createElement.bind(null, \"h6\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<div>` element with some attributes\r\n * @function createDiv\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLDivElement}\r\n * @memberof DOM\r\n */\r\nexport const createDiv = createElement.bind(null, \"div\", \"html,text\");\r\n\r\n\r\n\r\n/**\r\n * Creates a `<br>` element \\\r\n * Line break (carriage-return)\r\n * @function createLineBreak\r\n * @returns {HTMLBRElement}\r\n * @memberof DOM\r\n */\r\nexport const createLineBreak = createEmptyElement.bind(null, \"br\", \"\");\r\n\r\n/**\r\n * Creates a `<hr>` element \\\r\n * Thematic break\r\n * @function createThematicBreak\r\n * @returns {HTMLHRElement}\r\n * @memberof DOM\r\n */\r\nexport const createThematicBreak = createEmptyElement.bind(null, \"hr\", \"\");\r\n\r\n/**\r\n * Creates a `<p>` element with some attributes\r\n * @function createParagraph\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLParagraphElement}\r\n * @memberof DOM\r\n */\r\nexport const createParagraph = createElement.bind(null, \"p\", \"html,text\");\r\n\r\n\r\n/**\r\n * Creates a `<blockquote>` element with some attributes\r\n * @function createBlockQuotation\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLQuoteElement}\r\n * @memberof DOM\r\n */\r\nexport const createBlockQuotation = createElement.bind(null, \"blockquote\", \"cite,html,text\");\r\n\r\n/**\r\n * Creates a `<ul>` element with some attributes\r\n * @function createUnorderedList\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLUListElement}\r\n * @memberof DOM\r\n */\r\nexport const createUnorderedList = createElement.bind(null, \"ul\", \"html\");\r\n\r\n/**\r\n * Creates a `<ol>` element with some attributes\r\n * @function createOrderedList\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLOListElement}\r\n * @memberof DOM\r\n */\r\nexport const createOrderedList = createElement.bind(null, \"ol\", \"html,reversed,start,type\");\r\n\r\n/**\r\n * Creates a `<li>` element with some attributes\r\n * @function createListItem\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLLIElement}\r\n * @memberof DOM\r\n */\r\nexport const createListItem = createElement.bind(null, \"li\", \"html,text,value\");\r\n\r\n\r\n/**\r\n * Creates a `<dl>` element with some attributes\r\n * @function createDescriptionList\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLDListElement}\r\n * @memberof DOM\r\n */\r\nexport const createDescriptionList = createElement.bind(null, \"dl\", \"html\");\r\n\r\n/**\r\n * Creates a `<dt>` element with some attributes\r\n * @function createDescriptionTerm\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createDescriptionTerm = createElement.bind(null, \"dt\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<dd>` element with some attributes\r\n * @function createDescriptionDetails\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createDescriptionDetails = createElement.bind(null, \"dd\", \"html,text\");\r\n\r\n/******************************************************************************\r\n * Inline Element\r\n *****************************************************************************/\r\n\r\n/**\r\n * Creates an `<a>` element with some attributes\r\n * @function createAnchor\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLAnchorElement}\r\n * @memberof DOM\r\n */\r\nexport const createAnchor = createElement.bind(null, \"a\", \"download,href,hreflang,html,ping,rel,target,text,type\");\r\n\r\n/**\r\n * Creates an `<area>` element with some attributes\r\n * @function createArea\r\n * @param {object} _attribute \r\n * @returns {HTMLAreaElement}\r\n * @memberof DOM\r\n */\r\nexport const createArea = createEmptyElement.bind(null, \"area\", \"alt,coords,download,href,hreflang,media,ping,rel,shape,target\");\r\n\r\n\r\n/******************************************************************************\r\n * Embedded Element\r\n *****************************************************************************/\r\n\r\n/**\r\n * Creates a `<audio>` element with some attributes\r\n * @function createAudio\r\n * @param {object} _attribute\r\n * @param {Text|HTMLElement|HTMLElement[]} _children\r\n * @returns {HTMLAudioElement}\r\n * @memberof DOM\r\n */\r\nexport const createAudio = createElement.bind(null, \"audio\", \"autoplay,controls,crossorigin,html,loop,muted,preload,src,text\");\r\n\r\n/**\r\n * Creates a `<img>` element with some attributes\r\n * @function createImage\r\n * @param {object} _attribute \r\n * @returns {HTMLImageElement}\r\n * @memberof DOM\r\n */\r\nexport const createImage = createEmptyElement.bind(null, \"img\", \"alt,crossorigin,decoding,height,ismap,loading,sizes,src,srcset,usemap,width\");\r\n\r\n/**\r\n * Creates a `<embed>` element with some attributes\r\n * @function createEmbed\r\n * @param {object} _attribute \r\n * @returns {HTMLEmbedElement}\r\n * @memberof DOM\r\n */\r\nexport const createEmbed = createEmptyElement.bind(null, \"embed\", \"height,src,type,width\");\r\n\r\n/**\r\n * Creates a `<figure>` element with some attributes\r\n * @function createFigure\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createFigure = createElement.bind(null, \"figure\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<figcaption>` element with some attributes\r\n * @function createFigureCaption\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createFigureCaption = createElement.bind(null, \"figcaption\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<object>` element with some attributes\r\n * @function createObject\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLObjectElement}\r\n * @memberof DOM\r\n */\r\nexport const createObject = createElement.bind(null, \"object\", \"data,height,html,name,text,type,usemap,width\");\r\n\r\n/**\r\n * Creates a `<picture>` element with some attributes\r\n * @function createPicture\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLPictureElement}\r\n * @memberof DOM\r\n */\r\nexport const createPicture = createElement.bind(null, \"picture\", \"html\");\r\n\r\n/**\r\n * Creates a `<source>` element with some attributes\r\n * @function createSource\r\n * @param {object} _attribute\r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLSourceElement}\r\n * @memberof DOM\r\n */\r\nexport const createSource = createEmptyElement.bind(null, \"source\", \"media,sizes,src,srcset,type\");\r\n\r\n/**\r\n * Creates a `<track>` element with some attributes\r\n * @function createTrack\r\n * @param {object} _attribute \r\n * @returns {HTMLTrackElement}\r\n * @memberof DOM\r\n */\r\nexport const createTrack = createEmptyElement.bind(null, \"track\", \"default,kind,label,src,srclang\");\r\n\r\n/**\r\n * Creates a `<video>` element with some attributes\r\n * @function createVideo\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLVideoElement}\r\n * @memberof DOM\r\n */\r\nexport const createVideo = createElement.bind(null, \"video\", \"autoplay,controls,crossorigin,height,html,loop,muted,playsinline,poster,preload,src,text,width\");\r\n\r\n\r\n/**\r\n * Creates a `<span>` element with some attributes\r\n * @function createSpan\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLSpanElement}\r\n * @memberof DOM\r\n */\r\nexport const createSpan = createElement.bind(null, \"span\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<strong>` element with some attributes\r\n * @function createStrong\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createStrong = createElement.bind(null, \"strong\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<em>` element with some attributes\r\n * @function createEmphasis\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createEmphasis = createElement.bind(null, \"em\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<mark>` element with some attributes\r\n * @function createMark\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createMark = createElement.bind(null, \"mark\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<samp>` element with some attributes\r\n * @function createSample\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createSample = createElement.bind(null, \"samp\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<sub>` element with some attributes\r\n * @function createSubscript\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createSubscript = createElement.bind(null, \"sub\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<sup>` element with some attributes\r\n * @function createSuperscript\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createSuperscript = createElement.bind(null, \"sup\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<del>` element with some attributes\r\n * @function createDeletedPart\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLModElement}\r\n * @memberof DOM\r\n */\r\nexport const createDeletedPart = createElement.bind(null, \"del\", \"cite,datetime\");\r\n\r\n/**\r\n * Creates a `<ins>` element with some attributes\r\n * @function createInsertedPart\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLModElement}\r\n * @memberof DOM\r\n */\r\nexport const createInsertedPart = createElement.bind(null, \"ins\", \"cite,datetime\");\r\n\r\n/**\r\n * Creates a `<q>` element with some attributes\r\n * @function createQuote\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLQuoteElement}\r\n * @memberof DOM\r\n */\r\nexport const createQuote = createElement.bind(null, \"q\", \"cite,html,text\");\r\n\r\n/**\r\n * Creates a `<abbr>` element with some attributes\r\n * @function createAbbreviation\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createAbbreviation = createElement.bind(null, \"abbr\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<b>` element with some attributes\r\n * @function createB\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createB = createElement.bind(null, \"b\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<i>` element with some attributes\r\n * @function createI\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createI = createElement.bind(null, \"i\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<s>` element with some attributes\r\n * @function createS\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createS = createElement.bind(null, \"s\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<u>` element with some attributes\r\n * @function createU\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createU = createElement.bind(null, \"u\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<cite>` element with some attributes\r\n * @function createCite\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createCite = createElement.bind(null, \"cite\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<time>` element with optionally some attributes\r\n * @function createTime\r\n * @param {object} _attribute \r\n * @returns {HTMLTimeElement}\r\n * @memberof DOM\r\n */\r\nexport const createTime = createElement.bind(null, \"time\", \"datetime,html,text\");\r\n\r\n/**\r\n * Creates a `<code>` element with some attributes\r\n * @function createCode\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createCode = createElement.bind(null, \"code\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<form>` element with some attributes\r\n * @function createForm\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLFormElement}\r\n * @memberof DOM\r\n */\r\nexport const createForm = createElement.bind(null, \"form\", \"accept-charset,action,autocomplete,enctype,html,method,name,novalidate,rel,target,text\");\r\n\r\nconst inputTypes = [\"button\", \"checkbox\", \"color\", \"date\", \"datetime-local\", \"email\", \"file\",\r\n    \"hidden\", \"image\", \"month\", \"number\", \"password\", \"radio\", \"range\", \"reset\",\r\n    \"search\", \"submit\", \"tel\", \"text\", \"time\", \"url\", \"week\"];\r\n\r\n/**\r\n * Creates an `<input>` element with some attributes\r\n * @function createInput\r\n * @param {object} _attribute \r\n * @returns {HTMLInputElement}\r\n * @memberof DOM\r\n */\r\nexport const createInput = createEmptyElement.bind(null, \"input\", \"accept,alt,autocomplete,autofocus,capture,checked,dirname,disabled,height,max,maxlength,minlength,min,multiple,name,pattern,placeholder,readonly,required,size,src,step,type,value,width\");\r\n\r\n/**\r\n * Creates a `<textarea>` element with some attributes\r\n * @function createTextArea\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTextAreaElement}\r\n * @memberof DOM\r\n */\r\nexport const createTextArea = createElement.bind(null, \"textarea\", \"autocomplete,autofocus,cols,disabled,html,maxlength,minlength,name,placeholder,readonly,required,rows,spellcheck,text,value,wrap\");\r\n\r\n/**\r\n * Creates a `<label>` element with some attributes\r\n * @function createLabel\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLLabelElement}\r\n * @memberof DOM\r\n */\r\nexport const createLabel = createElement.bind(null, \"label\", \"for,html,text\");\r\n\r\n/**\r\n * Creates a `<select>` element with some attributes\r\n * @function createSelect\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLSelectElement}\r\n * @memberof DOM\r\n */\r\nexport const createSelect = createElement.bind(null, 'select', \"autocomplete,autofocus,disabled,html,multiple,name,required,size\");\r\n\r\n/**\r\n * Creates a `<option>` element with some attributes\r\n * @function createOption\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLOptionElement}\r\n * @memberof DOM\r\n */\r\nexport const createOption = createElement.bind(null, \"option\", \"disabled,html,label,selected,text,value\");\r\n\r\n/**\r\n * Creates a `<optgroup>` element with some attributes\r\n * @function createOptionGroup\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLOptGroupElement}\r\n * @memberof DOM\r\n */\r\nexport const createOptionGroup = createElement.bind(null, \"optgroup\", \"disabled,html,label\");\r\n\r\n/**\r\n * Creates a `<fieldset>` element with some attributes\r\n * @function createFieldset\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLFieldSetElement}\r\n * @memberof DOM\r\n */\r\nexport const createFieldset = createElement.bind(null, \"fieldset\", \"disabled,html,name,text\");\r\n\r\n/**\r\n * Creates a `<legend>` element with some attributes\r\n * @function createLegend\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLLabelElement}\r\n * @memberof DOM\r\n */\r\nexport const createLegend = createElement.bind(null, \"legend\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<datalist>` element with some attributes\r\n * @function createDataList\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTextAreaElement}\r\n * @memberof DOM\r\n */\r\nexport const createDataList = createElement.bind(null, \"datalist\", \"html\");\r\n\r\n/**\r\n * Creates a `<meter>` element with some attributes\r\n * @function createMeter\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTextAreaElement}\r\n * @memberof DOM\r\n */\r\nexport const createMeter = createElement.bind(null, \"meter\", \"high,html,low,max,min,optimum,text,value\");\r\n\r\n/**\r\n * Creates a `<progress>` element with some attributes\r\n * @function createProgress\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTextAreaElement}\r\n * @memberof DOM\r\n */\r\nexport const createProgress = createElement.bind(null, \"progress\", \"html,max,text,value\");\r\n\r\n/**\r\n * Creates a `<output>` element with optionally some attributes and children elements\r\n * @function createOutput\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTextAreaElement}\r\n * @memberof DOM\r\n */\r\nexport const createOutput = createElement.bind(null, \"output\", \"html,name,text,value\");\r\n\r\nconst buttonTypes = [\"button\", \"submit\", \"reset\"];\r\n\r\n/**\r\n * Creates a `<button>` element with optionally some attributes and children elements\r\n * @function createButton\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLButtonElement}\r\n * @memberof DOM\r\n */\r\nexport const createButton = createElement.bind(null, \"button\", \"autofocus,disabled,formaction,formenctype,formmethod,formnovalidate,formtarget,html,name,text,type,value\");\r\n\r\n/**\r\n * Creates a `<table>` element with some attributes\r\n * @function createTable\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTableElement}\r\n * @memberof DOM\r\n */\r\nexport const createTable = createElement.bind(null, \"table\", \"html\");\r\n\r\n/**\r\n * Creates a `<caption>` element with some attributes\r\n * @function createCaption\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTableCaptionElement}\r\n * @memberof DOM\r\n */\r\nexport const createCaption = createElement.bind(null, \"caption\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<thead>` element with some attributes\r\n * @function createTableHeader\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTableSectionElement}\r\n * @memberof DOM\r\n */\r\nexport const createTableHeader = createElement.bind(null, \"thead\", \"html\");\r\n\r\n/**\r\n * Creates a `<tbody>` element with some attributes\r\n * @function createTableBody\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTableSectionElement}\r\n * @memberof DOM\r\n */\r\nexport const createTableBody = createElement.bind(null, \"tbody\", \"html\");\r\n\r\n/**\r\n * Creates a `<tfoot>` element with some attributes\r\n * @function createTableFooter\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTableSectionElement}\r\n * @memberof DOM\r\n */\r\nexport const createTableFooter = createElement.bind(null, \"tfoot\", \"html\");\r\n\r\n/**\r\n * Creates a `<col>` element with some attributes\r\n * @function createTableColumn\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTableColElement}\r\n * @memberof DOM\r\n */\r\nexport const createTableColumn = createEmptyElement.bind(null, \"col\", \"span\");\r\n\r\n/**\r\n * Creates a `<colgroup>` element with some attributes\r\n * @function createTableColumnGroup\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTableColElement}\r\n * @memberof DOM\r\n */\r\nexport const createTableColumnGroup = createElement.bind(null, \"colgroup\", \"html,span\");\r\n\r\n/**\r\n * Creates a `<tr>` element with some attributes\r\n * @function createTableRow\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTableRowElement}\r\n * @memberof DOM\r\n */\r\nexport const createTableRow = createElement.bind(null, \"tr\", \"html\");\r\n\r\n/**\r\n * Creates a `<th>` element with some attributes\r\n * @function createTableHeaderCell\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTableCellElement}\r\n * @memberof DOM\r\n */\r\nexport const createTableHeaderCell = createElement.bind(null, \"th\", \"abbr,colspan,html,rowspan,scope,text\");\r\n\r\n/**\r\n * Creates a `<td>` element with some attributes\r\n * @function createTableCell\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children\r\n * @returns {HTMLTableCellElement}\r\n * @memberof DOM\r\n */\r\nexport const createTableCell = createElement.bind(null, \"td\", \"colspan,html,rowspan,text\");\r\n\r\n/**\r\n * Appends the children to the element\r\n * @param {Node} element element\r\n * @param {HTMLCollection} content children elements\r\n * @private\r\n * @memberof DOM\r\n */\r\n/* istanbul ignore next */\r\nfunction addContent(element, content) {\r\n    if (!(isNode(content) || isIterable(content))) {\r\n        return element;\r\n    }\r\n\r\n    if (isNode(content) || isString(content)) {\r\n        element.append(content);\r\n    } else {\r\n        element.append(...content);\r\n    }\r\n\r\n    return element;\r\n}","import { isFunction, isNullOrUndefined, valOrDefault, isNullOrWhitespace } from '@std/index.js';\r\nimport { isElement, isHTMLElement, isDocumentFragment, isNode } from './dom-parse.js';\r\n\r\n/**\r\n * Checks whether the selector represents a `class`\r\n * @returns {boolean}\r\n * @private\r\n */\r\nconst isClassSelector = (selector) => /^\\.[a-zA-Z0-9_-]+$/.test(selector);\r\n\r\n/**\r\n * Checks whether the selector represents an `id`\r\n * @returns {boolean}\r\n * @private\r\n */\r\nconst isIdSelector = (selector) => /^#[a-zA-Z0-9_-]+$/.test(selector);\r\n\r\n/**\r\n * Returns the first element within the specified container that matches the \r\n * specified selector, group or selectors.\r\n * @param {!string} selector A DOMString containing one or more selectors to match\r\n * @param {HTMLElement|DocumentFragment} [_container] Container queried\r\n * @returns {HTMLElement|null} The first element matches that matches the specified set of CSS selectors.\r\n * @memberof DOM\r\n */\r\nexport function getElement(selector, _container) {\r\n    const container = isNode(_container) ? _container : document;\r\n\r\n    if (isNullOrWhitespace(selector)) {\r\n        return null;\r\n    }\r\n\r\n    if (isDocumentFragment(container)) {\r\n        return container.querySelector(selector);\r\n    }\r\n\r\n    if (isIdSelector(selector)) {\r\n        return document.getElementById(selector.substring(1));\r\n    }\r\n\r\n    if (isClassSelector(selector)) {\r\n        return container.getElementsByClassName(selector.substring(1))[0];\r\n    }\r\n\r\n    return container.querySelector(selector);\r\n}\r\n\r\n/**\r\n * Returns all elements that match the selector query.\r\n * @param {!string} selector A DOMString containing one or more selectors to match\r\n * @param {HTMLElement|DocumentFragment} [_container] Container queried\r\n * @returns {HTMLCollection|NodeList} A live or *static* (not live) collection of the `container`'s children Element that match the `selector`.\r\n * @memberof DOM\r\n */\r\nexport function getElements(selector, _container) {\r\n    const container = isNode(_container) ? _container : document;\r\n\r\n    if (isNullOrWhitespace(selector)) {\r\n        return null;\r\n    }\r\n\r\n    if (isDocumentFragment(container)) {\r\n        return container.querySelectorAll(selector);\r\n    }\r\n\r\n    if (isClassSelector(selector)) {\r\n        return container.getElementsByClassName(selector.substring(1));\r\n    }\r\n\r\n    return container.querySelectorAll(selector);\r\n}\r\n\r\n/**\r\n * Returns the first Template within the specified container that matches the specified selector, group or selectors.\r\n * @param {string} selector A DOMString containing one or more selectors to match\r\n * @param {HTMLElement} [_container] Container queried\r\n * @returns {HTMLTemplateElement|null} The first Template matches that matches the specified set of CSS selectors.\r\n * @memberof DOM\r\n */\r\nexport function getTemplate(selector, _container) {\r\n    return 'content' in document.createElement('template') ? getElement(selector, _container) : null;\r\n}\r\n\r\n/**\r\n * Returns a duplicate of the template.\r\n * @param {HTMLTemplateElement} template \r\n * @param {boolean} deep used to decide whether the children of the template should also be clone\r\n * @returns {DocumentFragment} The template's clone.\r\n * @memberof DOM\r\n */\r\nexport function cloneTemplate(template, deep) {\r\n    return template ? document.importNode(template.content, valOrDefault(deep, true)) : template;\r\n}\r\n\r\n/**\r\n * Gets the previous or next element of the specified element\r\n * @param {string} dir sibling direction\r\n * @param {HTMLElement} element element\r\n * @returns {(Element|null)} Element or null\r\n * @private\r\n */\r\n/* istanbul ignore next */\r\nfunction getElementSibling(dir, element, pred) {\r\n    if (!isHTMLElement(element)) {\r\n        return null;\r\n    }\r\n\r\n    var sibling = element[dir];\r\n\r\n    if (isFunction(pred)) {\r\n        while (isElement(sibling) && !pred(sibling)) {\r\n            sibling = sibling[dir];\r\n        }\r\n    }\r\n\r\n    return sibling;\r\n}\r\n\r\n/**\r\n * Gets the previous element of the specified one in its parent's children list\r\n * @function getPreviousElementSibling\r\n * @param {HTMLElement} el element\r\n * @param {*} pred Search end condition\r\n * @returns {(Element|null)} Element or null if the specified element is the first one in the list\r\n * @memberof DOM\r\n */\r\nexport const getPreviousElementSibling = getElementSibling.bind(null, \"previousElementSibling\");\r\n\r\n/**\r\n * Gets the element following the specified one in its parent's children list\r\n * @function getNextElementSibling\r\n * @param {HTMLElement} el element\r\n * @param {*} pred Search end condition\r\n * @returns {(Element|null)} Element or null if the specified element is the last one in the list\r\n * @memberof DOM\r\n */\r\nexport const getNextElementSibling = getElementSibling.bind(null, \"nextElementSibling\");\r\n\r\n/**\r\n * Finds an ancestor of an element\r\n * @param {!Element} target \r\n * @param {!Function} pred Decides whether the target is found\r\n * @param {number} [_max] Maximum number of iterations\r\n * @returns {Element|null}\r\n * @memberof DOM\r\n */\r\nexport function findAncestor(target, pred, _max) {\r\n    if (!isElement(target)) {\r\n        throw new TypeError(\"Bad argument: The given target parameter is not a valid HTML Element\");\r\n    }\r\n\r\n    if (!isFunction(pred)) {\r\n        throw new TypeError(\"Bad argument: The given pred parameter is not a valid Function\");\r\n    }\r\n\r\n    var parent = target.parentElement;\r\n\r\n    if (_max > 0) {\r\n        return findAncestorIter(parent, pred, _max - 1);\r\n    }\r\n\r\n    return findAncestorInf(parent, pred);\r\n}\r\n\r\n/**\r\n * Look an ancestor of an element using a callback\r\n * @param {Element} target \r\n * @param {Function} pred Decides whether the target is found\r\n * @private\r\n */\r\n/* istanbul ignore next */\r\nfunction findAncestorInf(target, pred) {\r\n    if (isNullOrUndefined(target)) {\r\n        return null;\r\n    }\r\n\r\n    if (pred(target)) {\r\n        return target;\r\n    }\r\n\r\n    return findAncestorInf(target.parentElement, pred);\r\n}\r\n\r\n/**\r\n * Look for an ancestor of an element using a callback with a maximum number of iteration\r\n * @param {Element} target \r\n * @param {Function} pred Decides whether the target is found\r\n * @param {number} max Maximum number of iterations\r\n * @private\r\n */\r\n/* istanbul ignore next */\r\nfunction findAncestorIter(target, pred, max) {\r\n    if (isNullOrUndefined(target) || max === 0) {\r\n        return null;\r\n    }\r\n\r\n    if (pred(target)) {\r\n        return target;\r\n    }\r\n\r\n    return findAncestorIter(target.parentElement, pred, max - 1);\r\n}","/**\r\n * Returns an object value or default value if undefined\r\n * @param {*} arg object\r\n * @param {*} value default value\r\n * @param {boolean} [isNullable=false] indicates whether the value can be assigned the value *NULL*\r\n * @memberof STD\r\n */\r\nexport function valOrDefault(arg, value, isNullable = false) {\r\n    if (isNullable) {\r\n        return isUndefined(arg) ? value : arg;\r\n    }\r\n\r\n    return isNullOrUndefined(arg) ? value : arg;\r\n}\r\n\r\n/**\r\n * Returns a value indicating whether the value is empty\r\n * @param {Object[]|string} arr array\r\n * @returns {boolean}\r\n * @memberof STD\r\n */\r\nexport function isEmpty(obj) {\r\n    return isIterable(obj) && obj.length === 0;\r\n}\r\n\r\n/**\r\n * Returns a value indicating whether the variable is a Date\r\n * @param {*} value \r\n * @returns {boolean}\r\n * @memberof STD\r\n */\r\nexport function isDate(value) {\r\n    return value instanceof Date || (typeof value === 'object' && Object.prototype.toString.call(value) === '[object Date]');\r\n}\r\n\r\n/**\r\n * Returns a value indicating whether the variable is a String\r\n * @param {*} value\r\n * @returns {boolean}\r\n * @memberof STD\r\n */\r\nexport function isString(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\n\r\n/**\r\n * Returns a value indicating whether the value is a Function\r\n * @param {*} value\r\n * @returns {boolean}\r\n * @memberof STD\r\n */\r\nexport function isFunction(value) {\r\n    return typeof value === 'function';\r\n}\r\n\r\n/**\r\n * Returns a value indicating whether the value is an Object\r\n * @param {*} value\r\n * @returns {boolean}\r\n * @memberof STD\r\n */\r\nexport function isObject(value) {\r\n    return !isNullOrUndefined(value) && typeof value === 'object';\r\n}\r\n\r\n/**\r\n * Returns a value indicating whether the object is iterable\r\n * @param {*} obj\r\n * @returns {boolean}\r\n * @memberof STD\r\n */\r\nexport function isIterable(obj) {\r\n    return !isNullOrUndefined(obj) && typeof obj[Symbol.iterator] === 'function';\r\n}\r\n\r\n/**\r\n * Returns a value indicating whether the object is a non-string iterable\r\n * @param {*} obj\r\n * @returns {boolean}\r\n * @memberof STD\r\n */\r\nexport function isCollection(obj) {\r\n    return isIterable(obj) && !isString(obj);\r\n}\r\n\r\n/**\r\n * Returns a value indicating whether the value is null\r\n * @param {*} value\r\n * @returns {boolean}\r\n * @memberof STD\r\n */\r\nexport function isNull(value) { \r\n    return value === null; \r\n}\r\n\r\n/**\r\n * Returns a value indicating whether a string is null or made of whitespace.\r\n * @param {string} value string\r\n * @returns {boolean}\r\n * @memberof STD\r\n */\r\nexport function isNullOrWhitespace(value) {\r\n    return (!value || isString(value) && (value.length === 0 || /^\\s*$/.test(value)));\r\n}\r\n\r\n/**\r\n * Returns a value indicating whether the value is undefined\r\n * @param {*} value\r\n * @returns {boolean}\r\n * @memberof STD\r\n */\r\nexport function isUndefined(value) { \r\n    return typeof value === 'undefined'; \r\n}\r\n\r\n/**\r\n * Returns a value indicating whether the value is null or undefined\r\n * @param {*} value\r\n * @returns {boolean}\r\n * @memberof STD\r\n */\r\nexport function isNullOrUndefined(value) { \r\n    return isNull(value) || isUndefined(value); \r\n}","import { isNullOrUndefined, isDate } from './std-parse.js';\r\n\r\n\r\n/**\r\n * Compare 2 times\r\n * @param {string} t1 time 1\r\n * @param {string} t2 time 2\r\n * @param {string} [separator=\":\"]\r\n * @returns {number} 1, 0, -1 if t1 > t2, t1 = t2 and t1 < t2 respectively\r\n * @memberof STD\r\n */\r\nexport function compareTime(t1, t2, separator = \":\") {\r\n    if (isNullOrUndefined(t1) || isNullOrUndefined(t2) || !t1.includes(separator) || !t2.includes(separator)) {\r\n        return null;\r\n    }\r\n\r\n    var arr1 = t1.split(separator);\r\n    var arr2 = t2.split(separator);\r\n\r\n    // hour comparison\r\n    if (+arr1[0] > +arr2[0]) {\r\n        return 1;\r\n    } else if (+arr1[0] < +arr2[0]) {\r\n        return -1;\r\n    } else {\r\n        // minute comparison\r\n        if (+arr1[1] > +arr2[1]) {\r\n            return 1;\r\n        } else if (+arr1[1] < +arr2[1]) {\r\n            return -1;\r\n        } else {\r\n            if (arr1.length == arr2.length && arr1.length == 3) {\r\n                // second comparison\r\n                if (+arr1[2] > +arr2[2]) {\r\n                    return 1;\r\n                } else if (+arr1[2] < +arr2[2]) {\r\n                    return -1;\r\n                }\r\n            }\r\n\r\n            return 0;\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Resolves a date value\r\n * @param {*} [value] \r\n * @returns {Date}\r\n  * @memberof STD\r\n */\r\nexport function resolveDate(value, useOffset = true) {\r\n    if (isNullOrUndefined(value)) {\r\n        return new Date();\r\n    } else if (isDate(value)) {\r\n        return value;\r\n    }\r\n\r\n    var date = new Date(value);\r\n    var time = date.getTime();\r\n\r\n    if (Number.isNaN(time)) {\r\n        return new Date();\r\n    }\r\n\r\n    if (useOffset) {\r\n        return new Date(time + date.getTimezoneOffset() * 60000);\r\n    }\r\n\r\n    return date;\r\n}\r\n\r\n/**\r\n * Formats a date\r\n * @param {!Date} date \r\n * @param {!string} format \r\n * @returns {string} Formatted date\r\n * @memberof STD\r\n */\r\nexport function formatDate(date, format) {\r\n    var dd = date.getDate();\r\n    var mm = date.getMonth() + 1;   // January = 0\r\n    var yyyy = date.getFullYear().toString();\r\n    var hh = date.getHours();\r\n    var MM = date.getMinutes();\r\n    var ss = date.getSeconds();\r\n\r\n    const twoDigits = (val) => val < 10 ? `0${val}` : val;\r\n\r\n    return format.replace('yyyy', yyyy)\r\n        .replace('yy', yyyy.slice(-2))\r\n        .replace('mm', twoDigits(mm))\r\n        .replace('m', mm)\r\n        .replace('dd', twoDigits(dd))\r\n        .replace('d', dd)\r\n        .replace('hh', twoDigits(hh))\r\n        .replace('h', hh)\r\n        .replace('MM', twoDigits(MM))\r\n        .replace('M', MM)\r\n        .replace('ss', twoDigits(ss))\r\n        .replace('s', ss);\r\n}\r\n\r\n/**\r\n * Returns a date and time using the format \"YYYY-mm-dd\"\r\n * @param {*} _date \r\n * @returns {string}\r\n * @memberof STD\r\n */\r\nexport function shortDate(_date) {\r\n    var date = resolveDate(_date);\r\n\r\n    return formatDate(date, 'yyyy-mm-dd');\r\n}\r\n\r\n/**\r\n * Returns a date and time using the format \"YYYY-mm-dd hh:MM\"\r\n * @param {*} _date \r\n * @returns {string}\r\n * @memberof STD\r\n */\r\nexport function shortDateTime(_date) {\r\n    var date = resolveDate(_date, false);\r\n\r\n    return formatDate(date, 'yyyy-mm-dd hh:MM');\r\n}","import { isObject, isNullOrUndefined } from \"./std-parse.js\";\r\n\r\n\r\n/** @private */\r\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\r\n\r\n/** @private */\r\nconst isPrototypeOf = Object.prototype.isPrototypeOf;\r\n\r\n\r\n/**\r\n * Returns a boolean indicating whether the object has the specified property as its own property (not inherited).\r\n * @param {*} obj target object\r\n * @param {string} key name of the property\r\n * @memberof STD\r\n */\r\nexport const hasOwn = function (obj, key) {\r\n    return hasOwnProperty.call(obj, key);\r\n};\r\n\r\n/**\r\n * Returns a boolean indicating whether the object (child) inherit from another object (parent)\r\n * @param {*} child \r\n * @param {*} parent \r\n * @memberof STD\r\n */\r\nexport const isDerivedOf = function (child, parent) {\r\n    return Object.getPrototypeOf(child) !== parent && isPrototypeOf.call(parent, child);\r\n};\r\n\r\n/**\r\n * Creates a clone of an object\r\n * @param {*} obj Object\r\n * @memberof STD\r\n */\r\nexport function cloneObject(obj) {\r\n    if (isNullOrUndefined(obj) || !isObject(obj)) {\r\n        return obj;\r\n    }\r\n\r\n    var temp = obj.constructor(); // changed\r\n    for (var key in obj) {\r\n        if (hasOwn(obj, key)) {\r\n            obj['isActiveClone'] = null;\r\n            temp[key] = cloneObject(obj[key]);\r\n            delete obj['isActiveClone'];\r\n        }\r\n    }\r\n\r\n    return temp;\r\n}","import { isNullOrWhitespace, isString } from \"./std-parse.js\";\r\nimport { hasOwn } from \"./std-object.js\";\r\n\r\n\r\n/**\r\n * Capitalizes all words in a sequence\r\n * @param {string} str Sequence\r\n * @returns {string} Capitalized sequence\r\n * @memberof STD\r\n */\r\nexport function capitalize(str) {\r\n    if (isNullOrWhitespace(str)) {\r\n        return str;\r\n    }\r\n\r\n    return str.toLowerCase().replace(/\\b\\w/g, (s) => s.toUpperCase());\r\n}\r\n\r\n/**\r\n * Capitalizes the first letter of a sequence\r\n * @param {string} str Sequence\r\n * @returns {string} Sequence with its first letter capitalized\r\n * @memberof STD\r\n */\r\nexport function capitalizeFirstLetter(str) {\r\n    if (isNullOrWhitespace(str)) {\r\n        return str;\r\n    }\r\n\r\n    return str.charAt(0).toUpperCase() + str.slice(1);\r\n}\r\n\r\nconst CaseHandler = {\r\n    'camel': (str) => camelCase(str),\r\n    'pascal': (str) => pascalCase(str),\r\n    'upper': (str) => str.toUpperCase(),\r\n    'lower': (str) => str.toLowerCase(),\r\n};\r\n\r\n/**\r\n * Format a sequence according to a specified case\r\n * @param {!string} str Sequence\r\n * @param {!string} casing Casing (camel, pascal, upper, lower)\r\n * @returns {string} Formatted sequence\r\n * @memberof STD\r\n */\r\nexport function formatCase(str, casing) {\r\n    if (isNullOrWhitespace(str)) {\r\n        return str;\r\n    }\r\n\r\n    if (!hasOwn(CaseHandler, casing)) {\r\n        return str;\r\n    }\r\n\r\n    return CaseHandler[casing](str);\r\n}\r\n\r\n/**\r\n * Capitalizes all words in a sequence except the first one and \r\n * removes spaces or punctuation\r\n * @param {!string} str Sequence\r\n * @returns {string} camelCased sequence\r\n * @memberof STD\r\n */\r\nexport function camelCase(str) {\r\n    if (isNullOrWhitespace(str)) {\r\n        return str;\r\n    }\r\n\r\n    var ccString = pascalCase(str);\r\n\r\n    return ccString.charAt(0).toLowerCase() + ccString.slice(1);\r\n}\r\n\r\n/**\r\n * Capitalizes all words in a sequence and removes spaces or punctuation\r\n * @param {!string} str Sequence\r\n * @returns {string} PascalCased sequence\r\n * @memberof STD\r\n */\r\nexport function pascalCase(str) {\r\n    if (isNullOrWhitespace(str)) {\r\n        return str;\r\n    }\r\n\r\n    var ccString = str.replace(/[_-]+/g, \" \").replace(/\\s+/g, ' ').trim();\r\n\r\n    return capitalize(ccString).replace(/\\s+/g, '');\r\n}\r\n\r\n/**\r\n * Removes all accents from a string\r\n * @param {!string} str A string\r\n * @returns {string} A string without accents\r\n * @memberof STD\r\n */\r\nexport function removeAccents(str) {\r\n    if (String.prototype.normalize) {\r\n        return str.normalize('NFD').replace(/[\\u0300-\\u036f]/g, \"\");\r\n    }\r\n\r\n    return str.replace(/[]/gi, 'a')\r\n        .replace(/[]/gi, 'c')\r\n        .replace(/[]/gi, 'e')\r\n        .replace(/[]/gi, 'i')\r\n        .replace(/[]/gi, 'o')\r\n        .replace(/[]/gi, 'u');\r\n}\r\n\r\n/**\r\n * Verifies that a character is a vowel\r\n * @param {string} char String character\r\n */\r\nexport function isVowel(char) {\r\n    if (!isString(char)) {\r\n        return false;\r\n    }\r\n\r\n    return \"aeiou\".includes(char.toLowerCase());\r\n}\r\n\r\n/**\r\n * Verifies that a character is a consonant\r\n * @param {string} char String character\r\n */\r\nexport function isConsonant(char) {\r\n    if (!isString(char)) {\r\n        return false;\r\n    }\r\n\r\n    return \"bcdfghjklmnpqrstvwxyz\".includes(char.toLowerCase());\r\n}\r\n\r\n/**\r\n * Verifies that a character is uppercase\r\n * @param {string} char String character\r\n */\r\nexport function isUpperCase(char) {\r\n    if (!isString(char)) {\r\n        return false;\r\n    }\r\n\r\n    let charCode = char.charCodeAt(0);\r\n\r\n    return charCode >= 65 && charCode <= 90;\r\n}\r\n\r\n/**\r\n * Verifies that a character is lowercase\r\n * @param {string} char String character\r\n */\r\nexport function isLowerCase(char) {\r\n    if (!isString(char)) {\r\n        return false;\r\n    }\r\n\r\n    let charCode = char.charCodeAt(0);\r\n\r\n    return charCode >= 97 && charCode <= 122;\r\n}","import { isFunction } from \"./std-parse.js\";\r\n\r\n\r\n/**\r\n * Verifies that the condition is satisfied for a specified number (range) of value\r\n * @param {*[]} values Set of values\r\n * @param {Function} pred Condition\r\n * @param {number} [min=1] Minimum number of values that must satisfy the condition\r\n * @param {number} [max] Maximum number of values that must satisfy the condition\r\n * @returns {boolean} A value indicating whether the condition is satisfied for the specified range\r\n * @memberof STD\r\n */\r\nexport const assert = function (values, pred, min, max) {\r\n    if (!(Array.isArray(values) && isFunction(pred))) {\r\n        throw new TypeError(\"Bad argument\");\r\n    }\r\n\r\n    var hitCount = getHitCount(values, pred);\r\n\r\n    if (all([min, max], Number.isInteger)) {\r\n        if (max < min) {\r\n            throw new Error(\"Bad argument: max must be greater than min\");\r\n        }\r\n\r\n        return hitCount >= min && hitCount <= max;\r\n    }\r\n\r\n    if (Number.isInteger(min)) {\r\n        return hitCount >= min;\r\n    }\r\n\r\n    if (Number.isInteger(max)) {\r\n        return hitCount <= max;\r\n    }\r\n\r\n    return hitCount > 0;\r\n};\r\n\r\n/**\r\n * Verifies that at least one value satisfies the condition\r\n * @param {*[]} values Set of values\r\n * @param {Function} pred Condition\r\n * @returns {boolean} A value indicating whether at least one value satisfies the condition\r\n * @memberof STD\r\n */\r\nexport const some = function (values, pred) {\r\n    if (!(Array.isArray(values) && isFunction(pred))) {\r\n        throw new TypeError(\"Bad argument\");\r\n    }\r\n\r\n    for (let i = 0; i < values.length; i++) {\r\n        let value = values[i];\r\n\r\n        if (pred(...(Array.isArray(value) ? value : [value]))) {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    return false;\r\n};\r\n\r\n/**\r\n * Verifies that all the values satisfy the condition\r\n * @param {*[]} values Set of values\r\n * @param {Function} pred Condition\r\n * @returns {boolean} A value indicating whether all the values satisfy the condition\r\n * @memberof STD\r\n */\r\nexport const all = function (values, pred) {\r\n    if (!(Array.isArray(values) && isFunction(pred))) {\r\n        throw new TypeError(\"Bad argument\");\r\n    }\r\n\r\n    for (let i = 0; i < values.length; i++) {\r\n        let value = values[i];\r\n\r\n        if (!pred(...(Array.isArray(value) ? value : [value]))) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    return true;\r\n};\r\n\r\n/**\r\n * Verifies that exactly one value satisfies the condition\r\n * @param {*[]} values Set of values\r\n * @param {Function} pred Condition\r\n * @returns {boolean} A value indicating whether exactly one value satisfies the condition\r\n * @memberof STD\r\n */\r\nexport const one = function (values, pred) {\r\n    if (!(Array.isArray(values) && isFunction(pred))) {\r\n        throw new TypeError(\"Bad argument\");\r\n    }\r\n\r\n    return getHitCount(values, pred) === 1;\r\n};\r\n\r\n/**\r\n * Verifies that no value satisfies the condition\r\n * @param {*[]} values Set of values\r\n * @param {Function} pred Condition\r\n * @returns {boolean} A value indicating whether no value satisfies the condition\r\n * @memberof STD\r\n */\r\nexport const no = function (values, pred) {\r\n    if (!(Array.isArray(values) && isFunction(pred))) {\r\n        throw new TypeError(\"Bad argument\");\r\n    }\r\n\r\n    return getHitCount(values, pred) === 0;\r\n};\r\n\r\n/**\r\n * Verifies that at most one value satisfies the condition\r\n * @param {*[]} values Set of values\r\n * @param {Function} pred Condition\r\n * @returns {boolean} A value indicating whether at most one value satisfies the condition\r\n * @memberof STD\r\n */\r\nexport const lone = function (values, pred) {\r\n    if (!(Array.isArray(values) && isFunction(pred))) {\r\n        throw new TypeError(\"Bad argument\");\r\n    }\r\n\r\n    return getHitCount(values, pred) <= 1;\r\n};\r\n\r\n/**\r\n * Gets the number of values that satisfy the condition\r\n * @param {*[]} values \r\n * @param {Function} pred \r\n * @returns {number}\r\n * @private\r\n */\r\n/* istanbul ignore next */\r\nfunction getHitCount(values, pred) {\r\n    var counter = 0;\r\n\r\n    for (let i = 0; i < values.length; i++) {\r\n        let value = values[i];\r\n\r\n        if (pred(...(Array.isArray(value) ? value : [value]))) {\r\n            counter++;\r\n        }\r\n    }\r\n\r\n    return counter;\r\n}","import { isNullOrWhitespace, isNullOrUndefined } from './std-parse.js';\r\nimport { cloneObject } from './std-object.js';\r\n\r\n\r\n/**\r\n * Append the path to the current path\r\n * @param {string} target \r\n * @param {string} path \r\n * @param {string} [separator=\".\"] \r\n * @memberof STD\r\n */\r\nexport function addPath(target, path, separator = \".\") {\r\n    return isNullOrWhitespace(target) ? path : `${target}${separator}${path}`;\r\n}\r\n\r\n/**\r\n * Returns the directory of the path\r\n * @param {string} path \r\n * @param {string} [separator=\".\"] \r\n * @memberof STD\r\n */\r\nexport function getDir(path, separator = \".\") {\r\n    return path.substring(0, path.lastIndexOf(separator));\r\n}\r\n\r\n/**\r\n * Returns the directory of the path from the target\r\n * @param {string} path \r\n * @memberof STD\r\n */\r\nexport function getDirTarget(path, target) {\r\n    return path.substring(0, path.lastIndexOf(target) - 1);\r\n}\r\n\r\nfunction findByIndex(obj, match, prop) {\r\n    const REGEX_DIGIT = /\\d+/g;\r\n    var index = +match[0].match(REGEX_DIGIT);\r\n    return obj[prop][index];\r\n}\r\n\r\n/**\r\n * Returns an element in an object using its path\r\n * @param {Object} obj\r\n * @param {string} path  \r\n * @param {string} [separator=.]\r\n * @memberof STD\r\n */\r\nexport function findByPath(obj, path, separator = \".\") {\r\n    const REGEX_BRACKET_DIGIT = /\\[\\d+\\]/g;\r\n    const REGEX_BRACKET_WORD = /\\[\\w+\\]/g;\r\n\r\n    var me = cloneObject(obj);\r\n\r\n    const findHandler = function (part, regex, callback) {\r\n        var match = part.match(regex);\r\n        var prop = part.substring(0, part.indexOf('['));\r\n        return callback(me, match, prop);\r\n    };\r\n\r\n    var parts = path.split(separator);\r\n    for (let i = 0, len = parts.length; i < len; i++) {\r\n        let part = parts[i];\r\n\r\n        if (REGEX_BRACKET_DIGIT.test(part)) {\r\n            me = findHandler(part, REGEX_BRACKET_DIGIT, findByIndex);\r\n        } else {\r\n            me = me[part];\r\n        }\r\n\r\n        if (isNullOrUndefined(me)) {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    return me;\r\n}","/**\r\n * @namespace URI\r\n */\r\n\r\nimport { isNullOrWhitespace, valOrDefault } from '@std/index.js';\r\n\r\nconst encode = encodeURIComponent;\r\n\r\n/**\r\n * Extracts and returns the protocol and host of a given url\r\n * @param {string} url \r\n * @memberof URI\r\n */\r\nexport function getRootUrl(url) {\r\n    return url.toString().replace(/^(.*\\/\\/[^/?#]*).*$/, \"$1\");\r\n}\r\n\r\n/**\r\n * Extracts and returns the parameters of a URL\r\n * @param {string} [prop] Searched parameter\r\n * @param {string} [defValue] Searched parameter default value\r\n * @memberof URI\r\n */\r\nexport function getUrlParams(prop, defValue) {\r\n    var search = decodeURIComponent(window.location.search);\r\n\r\n    if (isNullOrWhitespace(search)) {\r\n        return null;\r\n    }\r\n\r\n    var params = {};\r\n    if ('URLSearchParams' in window) {\r\n        let searchParams = new URLSearchParams(search.substring(1));\r\n        for (const pair of searchParams.entries()) {\r\n            params[pair[0]] = pair[1];\r\n        }\r\n        if (prop) {\r\n            return searchParams.get(prop);\r\n        }\r\n\r\n        return params;\r\n    }\r\n\r\n    var defs = search.substring(1).split('&');\r\n    defs.forEach((val) => {\r\n        var parts = val.split('=', 2);\r\n        params[parts[0]] = parts[1];\r\n    });\r\n    \r\n    if (prop) {\r\n        return valOrDefault(params[prop], defValue);\r\n    }\r\n\r\n    return params;\r\n}\r\n\r\n/* istanbul ignore next */\r\nfunction getParams(href) {\r\n    return href.slice(href.indexOf('?') + 1);\r\n}\r\n\r\n/**\r\n * Creates a query string\r\n * @param {Object} query \r\n * @returns {string} Query string\r\n * @memberof URI\r\n */\r\nexport function queryBuilder(query, ignoreNullOrEmpty = false) {\r\n    var str = [];\r\n\r\n    Object.keys(query).forEach((prop) => {\r\n        if (!ignoreNullOrEmpty || !isNullOrWhitespace(query[prop])) {\r\n            str.push(`${encode(prop)}=${encode(query[prop])}`);\r\n        }\r\n    });\r\n\r\n    return str.join('&');\r\n}","import { valOrDefault, isString } from \"./std-parse.js\";\r\n\r\n\r\n/**\r\n * Converts the received boolean value to an integer\r\n * @param {boolean} value \r\n * @returns {number} 1 or 0\r\n * @memberof STD\r\n */\r\nexport function boolToInt(value) { return value ? 1 : 0; }\r\n\r\n/**\r\n * Converts the received value to a boolean\r\n * @param {*} value\r\n * @returns {boolean} A boolean equivalent of the received value\r\n * @memberof STD\r\n */\r\nexport function toBoolean(value) {\r\n    var val = valOrDefault(value, false);\r\n\r\n    return isString(val) && val.toLowerCase() === \"true\" || Number.isInteger(val) && val === 1 || val === true;\r\n}\r\n","import { isNullOrUndefined } from '@std/index.js';\r\nimport { createTextArea } from './dom-create.js';\r\nimport { isHTMLElement } from './dom-parse.js';\r\n\r\n/**\r\n * Copies selected content to clipboard\r\n * @param {HTMLElement|string} value\r\n * @returns {boolean} Value indicating whether the content has been succesfully copied to the clipboard\r\n * @memberof DOM\r\n */\r\nexport function copytoClipboard(value) {\r\n    if (isNullOrUndefined(value)) {\r\n        return false;\r\n    }\r\n\r\n    var element = createTextArea({\r\n        value: isHTMLElement(value) ? value.textContent : value.toString(),\r\n        readonly: true\r\n    });\r\n\r\n    if(!isHTMLElement(element)) {\r\n        return false;\r\n    }\r\n\r\n    document.body.appendChild(element);\r\n    element.select();\r\n    document.execCommand('copy');\r\n    element.remove();\r\n\r\n    return true;\r\n}","/**\r\n * Creates a fetch request with a time limit to resolve the request\r\n * @param {URI} uri \r\n * @param {*} options \r\n * @param {number} time \r\n * @memberof STD\r\n */\r\nexport function fetchWithTimeout(uri, options = {}, time = 5000) {\r\n    // Lets set up our `AbortController`, and create a request options object\r\n    // that includes the controller's `signal` to pass to `fetch`.\r\n    const controller = new AbortController()\r\n    const config = { ...options, signal: controller.signal }\r\n\r\n    // Set a timeout limit for the request using `setTimeout`. If the body of this\r\n    // timeout is reached before the request is completed, it will be cancelled.\r\n    const timeout = setTimeout(() => {\r\n        controller.abort()\r\n    }, time)\r\n\r\n    return fetch(uri, config)\r\n        .then(response => {\r\n            if (!response.ok) {\r\n                throw new Error(`${response.status}: ${response.statusText}`)\r\n            }\r\n\r\n            return response\r\n        })\r\n        .catch(error => {\r\n            // When we abort our `fetch`, the controller conveniently throws a named\r\n            // error, allowing us to handle them separately from other errors.\r\n            if (error.name === 'AbortError') {\r\n                throw new Error('Response timed out')\r\n            }\r\n\r\n            throw new Error(error.message)\r\n        })\r\n}","import { isEmpty } from \"./std-parse.js\";\r\n\r\n\r\n/**\r\n * Inserts an item in an array at the specified index\r\n * @param {*[]} array array\r\n * @param {number} index \r\n * @param {object} item \r\n * @returns {number} The new length of the array\r\n * @memberof STD\r\n */\r\nexport function insert(array, index, item) {\r\n    if (!(Array.isArray(array) && Number.isInteger(index))) {\r\n        throw new TypeError(\"Bad argument\");\r\n    }\r\n\r\n    array.splice(index, 0, item);\r\n\r\n    return array.length;\r\n}\r\n\r\n/**\r\n * Returns the last element of an array.\r\n * @param {*[]} array array\r\n * @memberof STD\r\n */\r\nexport function last(array) {\r\n    if (!Array.isArray(array)) {\r\n        throw new TypeError(\"Bad argument\");\r\n    }\r\n\r\n    if (isEmpty(array)) {\r\n        return undefined;\r\n    }\r\n\r\n    return array[array.length - 1];\r\n}\r\n\r\n/**\r\n * Returns the first element of an array.\r\n * @param {*[]} array array\r\n * @memberof STD\r\n */\r\nexport function first(array) {\r\n    if (!Array.isArray(array)) {\r\n        throw new TypeError(\"Bad argument\");\r\n    }\r\n\r\n    return array[0];\r\n}","/**\r\n * Return a random integer between min and max (inclusive).\r\n * @param {number} min \r\n * @param {number} [max] \r\n * @param {boolean} [secure] \r\n * @memberof STD\r\n*/\r\nexport function random(min, max, secure = false) {\r\n    if (!Number.isInteger(min)) {\r\n        throw new TypeError(\"Bad argument\");\r\n    }\r\n\r\n    if (!Number.isInteger(max)) {\r\n        max = min;\r\n        min = 0;\r\n    }\r\n\r\n    if (max < min) {\r\n        throw new Error(\"Bad argument: max must be greater than min\");\r\n    }\r\n\r\n    return min + Math.floor((secure ? secureMathRandom() : Math.random()) * (max - min + 1));\r\n}\r\n\r\n/**\r\n * More secure implementation of `Math.random`\r\n * @private\r\n */\r\nfunction secureMathRandom() {\r\n    // Divide a random UInt32 by the maximum value (2^32 -1) to get a result between 0 and 1\r\n    return window.crypto.getRandomValues(new Uint32Array(1))[0] / 4294967295;\r\n}","import { isFunction } from '@std/index.js';\r\nimport { isNode } from './dom-parse.js';\r\n\r\n/**\r\n * Removes all children of a node from the DOM or \r\n * those that satisfy the predicate function if given\r\n * @param {!Node} node \r\n * @param {Function} [_callback] Decides whether the node should be removed\r\n * @memberof DOM\r\n */\r\nexport function removeChildren(node, _callback) {\r\n    if (!isNode(node)) {\r\n        throw new TypeError(\"Bad argument: The given `node` is not a valid Node\");\r\n    }\r\n\r\n    if (isFunction(_callback)) {\r\n        Array.from(node.childNodes).forEach(n => {\r\n            if (_callback(n)) {\r\n                node.removeChild(n);\r\n            }\r\n        });\r\n\r\n        return node;\r\n    }\r\n\r\n    return removeAllChildren(node);\r\n\r\n}\r\n\r\n/**\r\n * Removes all children of a node from the DOM\r\n * @param {!Node} node \r\n * @private\r\n */\r\n/* istanbul ignore next */\r\nfunction removeAllChildren(node) {\r\n    while (node.hasChildNodes()) {\r\n        node.removeChild(node.lastChild);\r\n    }\r\n\r\n    return node;\r\n}"],"names":["windowWidth","window","innerWidth","document","documentElement","clientWidth","body","windowHeight","innerHeight","clientHeight","isElementNode","obj","isNullOrUndefined","nodeType","Node","ELEMENT_NODE","isNode","isElement","Element","isHTMLElement","kind","HTMLElement","isIterable","element","kinds","isInstanceOf","hasTag","tag","tagName","toUpperCase","isOfType","type","Array","isArray","includes","some","name","toLowerCase","interfaceName","hasOwn","TagNameMapping","pascalCase","isCollection","isEmpty","isHTMLElementKind","a","br","dl","datalist","fieldset","frameset","hr","h1","h2","h3","h4","h5","h6","li","ol","optgroup","p","q","blockquote","caption","td","th","col","tr","tbody","thead","tfoot","textarea","ul","isDocumentFragment","DOCUMENT_FRAGMENT_NODE","isDocumentFragmentNode","DocumentFragment","_htmlToElement","prop","html","isString","template","createElement","innerHTML","trim","content","htmlToElement","bind","htmlToElements","delta","x","y","Math","abs","margin","top","style","marginTop","right","marginRight","bottom","marginBottom","left","marginLeft","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","border","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","isClosestTo","source","container","dir","sourceStyle","getComputedStyle","containerStyle","sourceMargin","containerPadding","containerBorder","sourceDistance","getBoundingClientRect","pixelToNumber","containerDistance","getElementTop","relative","items","children","top1","left1","closest","vdist","hdist","i","length","item","isHidden","classList","contains","bottom2","left2","$vdist","$hdist","getElementLeft","top2","right2","getElementRight","right1","getElementBottom","bottom1","assign","key","value","assignAttribute","setAttribute","GLOBAL_ATTRIBUTES","AttributeHandler","accesskey","autocapitalize","class","addClass","TypeError","add","formattedValue","replace","isNullOrWhitespace","className","split","dataset","Object","draggable","editable","hidden","id","inputmode","lang","tabindex","text","title","download","ping","target","coords","shape","autoplay","buffered","controls","loop","muted","playsinline","poster","preload","accept","action","autocomplete","autofocus","capture","checked","cols","disabled","dirname","enctype","for","form","formaction","formenctype","formmethod","formnovalidate","formtarget","high","label","list","low","max","maxlength","method","min","minlength","multiple","novalidate","optimum","pattern","placeholder","readonly","required","rows","selected","size","spellcheck","step","wrap","crossorigin","decoding","height","ismap","loading","srcset","width","alt","as","media","rel","src","sizes","reversed","start","charset","data","cite","abbr","colspan","span","rowspan","scope","default","srclang","href","hreflang","datetime","usemap","addAttributes","attribute","validAttributes","isObject","isValid","keys","args","slice","fn","shift","createEmptyElement","_validAttributes","_attributes","valOrDefault","_content","addContent","createBase","createLink","createMeta","createTitle","createTemplate","createHeader","createFooter","createMain","createArticle","createSection","createNav","createAside","createH1","createH2","createH3","createH4","createH5","createH6","createDiv","createLineBreak","createThematicBreak","createParagraph","createBlockQuotation","createUnorderedList","createOrderedList","createListItem","createDescriptionList","createDescriptionTerm","createDescriptionDetails","createAnchor","createArea","createAudio","createImage","createEmbed","createFigure","createFigureCaption","createObject","createPicture","createSource","createTrack","createVideo","createSpan","createStrong","createEmphasis","createMark","createSample","createSubscript","createSuperscript","createDeletedPart","createInsertedPart","createQuote","createAbbreviation","createB","createI","createS","createU","createCite","createTime","createCode","createForm","createInput","createTextArea","createLabel","createSelect","createOption","createOptionGroup","createFieldset","createLegend","createDataList","createMeter","createProgress","createOutput","createButton","createTable","createCaption","createTableHeader","createTableBody","createTableFooter","createTableColumn","createTableColumnGroup","createTableRow","createTableHeaderCell","createTableCell","append","isClassSelector","selector","test","isIdSelector","getElement","_container","querySelector","getElementById","substring","getElementsByClassName","getElementSibling","pred","sibling","isFunction","getPreviousElementSibling","getNextElementSibling","findAncestorInf","parentElement","findAncestorIter","arg","isNullable","isUndefined","isDate","Date","prototype","toString","call","String","Symbol","iterator","isNull","resolveDate","useOffset","date","time","getTime","Number","isNaN","getTimezoneOffset","formatDate","format","dd","getDate","mm","getMonth","yyyy","getFullYear","hh","getHours","MM","getMinutes","ss","getSeconds","twoDigits","val","hasOwnProperty","isPrototypeOf","cloneObject","temp","constructor","capitalize","str","s","CaseHandler","camel","camelCase","pascal","upper","lower","ccString","charAt","all","values","getHitCount","counter","findByIndex","match","index","encode","encodeURIComponent","path","separator","hitCount","isInteger","Error","select","optValue","eqHandler","option","options","from","selectedOptions","forEach","opt","deep","importNode","t1","t2","arr1","arr2","textContent","appendChild","execCommand","remove","_children","fragment","createDocumentFragment","createTextNode","uri","controller","AbortController","config","signal","setTimeout","abort","fetch","then","response","ok","status","statusText","catch","error","message","_max","parent","REGEX_BRACKET_DIGIT","me","findHandler","part","regex","callback","indexOf","parts","len","array","casing","usePred","console","lastIndexOf","querySelectorAll","url","defValue","search","decodeURIComponent","location","params","searchParams","URLSearchParams","pair","entries","get","splice","char","child","getPrototypeOf","HTMLCollection","inner","outer","charCode","charCodeAt","NodeList","query","ignoreNullOrEmpty","push","join","secure","floor","crypto","getRandomValues","Uint32Array","random","normalize","node","_callback","childNodes","n","removeChild","hasChildNodes","lastChild","removeAllChildren","_date"],"mappings":"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"}