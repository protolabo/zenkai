{"version":3,"file":"zenkai-dom.min.js","sources":["../src/dom/dom-stat.js","../src/dom/dom-parse.js","../src/dom/element-manip.js","../src/dom/dom-create.js","../src/dom/dom-query.js","../src/dom/copy-to-clipboard.js","../src/dom/dom-remove.js"],"sourcesContent":["/**\r\n * Gets the window's width\r\n * @memberof DOM\r\n */\r\nexport const windowWidth = () => window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\r\n\r\n/**\r\n * Gets the window's height\r\n * @memberof DOM\r\n */\r\nexport const windowHeight = () => window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;","import { isNullOrUndefined, isString, isIterable, hasOwn, pascalCase, isEmpty, all, some, isCollection } from '@std/index.js';\r\nimport { windowWidth, windowHeight } from './dom-stat.js';\r\n\r\n/* istanbul ignore next */\r\nconst isElementNode = (obj) => !isNullOrUndefined(obj) && obj.nodeType === Node.ELEMENT_NODE;\r\n\r\n/* istanbul ignore next */\r\nconst isDocumentFragmentNode = (obj) => !isNullOrUndefined(obj) && obj.nodeType === Node.DOCUMENT_FRAGMENT_NODE;\r\n\r\n/**\r\n * Verifies that an object is a *Node*\r\n * @param {Element} obj \r\n * @returns {boolean} Value indicating whether the object is an *Node*\r\n * @memberof DOM\r\n */\r\nexport const isNode = (obj) => obj instanceof Node;\r\n\r\n/**\r\n * Verifies that an object is a *NodeList*\r\n * @param {Element} obj \r\n * @returns {boolean} Value indicating whether the object is an *NodeList*\r\n * @memberof DOM\r\n */\r\nexport const isNodeList = (obj) => obj instanceof NodeList;\r\n\r\n/**\r\n * Verifies that an object is an *Element*\r\n * @param {Element} obj \r\n * @returns {boolean} Value indicating whether the object is an *Element*\r\n * @memberof DOM\r\n */\r\nexport const isElement = (obj) => isElementNode(obj) && obj instanceof Element;\r\n\r\n/**\r\n * Verifies that an object is an *HTML Element*\r\n * @param {Element} obj \r\n * @param {string|string[]|string[][]} [kind] \r\n * @returns {boolean} Value indicating whether the object is an *HTMLElement*\r\n * @memberof DOM\r\n */\r\nexport const isHTMLElement = (obj, kind) => {\r\n    if (!(isElementNode(obj) && obj instanceof HTMLElement)) {\r\n        return false;\r\n    }\r\n\r\n    if (isIterable(kind)) {\r\n        return isHTMLElementKind(obj, Array.isArray(kind) ? kind : [kind]);\r\n    }\r\n\r\n    return true;\r\n};\r\n\r\nconst TagNameMapping = {\r\n    'a': \"Anchor\",\r\n    'br': \"BR\",\r\n    'dl': \"DList\",\r\n    'datalist': \"DataList\",\r\n    'fieldset': \"FieldSet\",\r\n    'frameset': \"FrameSet\",\r\n    'hr': \"HR\",\r\n    'h1': \"Heading\",\r\n    'h2': \"Heading\",\r\n    'h3': \"Heading\",\r\n    'h4': \"Heading\",\r\n    'h5': \"Heading\",\r\n    'h6': \"Heading\",\r\n    'li': \"LI\",\r\n    'ol': \"OList\",\r\n    'optgroup': \"OptGroup\",\r\n    'p': \"Paragraph\",\r\n    'q': \"Quote\",\r\n    'blockquote': \"Quote\",\r\n    'caption': \"TableCaption\",\r\n    'td': \"TableCell\",\r\n    'th': \"TableCell\",\r\n    'col': \"TableCol\",\r\n    'tr': \"TableRow\",\r\n    'tbody': \"TableSection\",\r\n    'thead': \"TableSection\",\r\n    'tfoot': \"TableSection\",\r\n    'textarea': \"TextArea\",\r\n    'ul': \"UList\",\r\n};\r\n\r\n/**\r\n * Verifies the tag of an *HTML Element*\r\n * @param {HTMLElement} element \r\n * @param {string[]|string[][]} kinds\r\n * @returns {boolean}\r\n * @private\r\n */\r\nfunction isHTMLElementKind(element, kinds) {\r\n    const isInstanceOf = (obj) => element instanceof obj;\r\n    const hasTag = (tag) => element.tagName === tag.toUpperCase();\r\n    const isOfType = (type) => Array.isArray(type) ? type.includes(element.type) : element.type === type;\r\n    \r\n    return kinds.some((kind) => {\r\n        if (!isIterable(kind)) {\r\n            return false;\r\n        }\r\n\r\n        var name = kind;\r\n        var type = null;\r\n        \r\n        if (Array.isArray(kind)) {\r\n            [name, type] = kind;\r\n        }\r\n\r\n        name = name.toLowerCase();\r\n        var interfaceName = `HTML${hasOwn(TagNameMapping, name) ? TagNameMapping[name] : pascalCase(name)}Element`;\r\n\r\n        if (!(isInstanceOf(window[interfaceName]) || hasTag(name))) {\r\n            return false;\r\n        }\r\n\r\n        if (isCollection(type) && !isEmpty(type)) {\r\n            return isOfType(type);\r\n        }\r\n\r\n        return true;\r\n    });\r\n}\r\n\r\n/**\r\n * Verifies that an object is an *HTMLCollection*\r\n * @param {Element} obj \r\n * @returns {boolean} Value indicating whether the object is an *HTMLCollection*\r\n * @memberof DOM\r\n */\r\nexport const isHTMLCollection = (obj) => obj instanceof HTMLCollection;\r\n\r\n/**\r\n * Verifies that an object is an *DocumentFragment*\r\n * @param {Element} obj \r\n * @returns {boolean} Value indicating whether the object is an *DocumentFragment*\r\n * @memberof DOM\r\n */\r\nexport const isDocumentFragment = (obj) => isDocumentFragmentNode(obj) && obj instanceof DocumentFragment;\r\n\r\n/**\r\n * Converts an html string to an HTML Element or a list of HTML Elements\r\n * @param {!string} prop \r\n * @param {!string} html \r\n * @private\r\n */\r\n/* istanbul ignore next */\r\nfunction _htmlToElement(prop, html) {\r\n    if (!isString(html)) {\r\n        return null;\r\n    }\r\n\r\n    var template = document.createElement('template');\r\n    template.innerHTML = html.trim();\r\n\r\n    return template.content[prop];\r\n}\r\n\r\n/**\r\n * Converts an html string to an HTML Element\r\n * @param {!string} html \r\n * @returns {Node}\r\n * @memberof DOM\r\n */\r\nexport const htmlToElement = _htmlToElement.bind(null, 'firstChild');\r\n\r\n/**\r\n * Converts an html string to a list of HTML Elements\r\n * @param {!string} html \r\n * @returns {NodeList}\r\n * @memberof DOM\r\n */\r\nexport const htmlToElements = _htmlToElement.bind(null, 'childNodes');\r\n\r\n/**\r\n * Verifies that an element is visible\r\n * @param {!HTMLElement} element \r\n * @returns {boolean}\r\n * @memberof DOM\r\n */\r\nexport function isInViewport(element) {\r\n    if (!isHTMLElement(element)) {\r\n        throw new TypeError(\"Bad argument: The given 'element' is not a valid HTML Element\");\r\n    }\r\n\r\n    const { top, right, bottom, left } = element.getBoundingClientRect();\r\n\r\n    return top >= 0 && left >= 0 && bottom <= windowHeight() && right <= windowWidth();\r\n}\r\n\r\n/**\r\n * Verifies that an element is displayed inside a target element\r\n * @param {!HTMLElement} element \r\n * @param {!HTMLElement} target\r\n * @returns {boolean}\r\n * @memberof DOM\r\n */\r\nexport function isInElement(element, target) {\r\n    if (!all([element, target], isHTMLElement)) {\r\n        throw new TypeError(\"Bad argument: The given 'element' is not a valid HTML Element\");\r\n    }\r\n\r\n    const { top: top1, right: right1, bottom: bottom1, left: left1 } = element.getBoundingClientRect();\r\n    const { top: top2, right: right2, bottom: bottom2, left: left2 } = target.getBoundingClientRect();\r\n\r\n    return all([[top2, top1], [left2, left1], [right1, right2], [bottom1, bottom2]], (inner, outer) => inner <= outer);\r\n}\r\n\r\n\r\n\r\n/**\r\n * Computes the delta\r\n * @param {number} x \r\n * @param {number} y \r\n */\r\nconst delta = (x, y) => Math.abs(x - y);\r\n\r\nconst margin = {\r\n    \"top\": (style) => style.marginTop,\r\n    \"right\": (style) => style.marginRight,\r\n    \"bottom\": (style) => style.marginBottom,\r\n    \"left\": (style) => style.marginLeft,\r\n};\r\n\r\nconst padding = {\r\n    \"top\": (style) => style.paddingTop,\r\n    \"right\": (style) => style.paddingRight,\r\n    \"bottom\": (style) => style.paddingBottom,\r\n    \"left\": (style) => style.paddingLeft,\r\n};\r\n\r\nconst border = {\r\n    \"top\": (style) => style.borderTopWidth,\r\n    \"right\": (style) => style.borderRightWidth,\r\n    \"bottom\": (style) => style.borderBottomWidth,\r\n    \"left\": (style) => style.borderLeftWidth,\r\n};\r\n\r\n\r\n/**\r\n * Verifies if an element is the closest to a direction of a container\r\n * @param {HTMLElement} source \r\n * @param {HTMLElement} container \r\n * @param {string} dir \r\n */\r\nfunction isClosestTo(source, container, dir) {\r\n    const sourceStyle = window.getComputedStyle(source);\r\n    const containerStyle = window.getComputedStyle(container);\r\n\r\n    const sourceMargin = margin[dir](sourceStyle);\r\n    const containerPadding = padding[dir](containerStyle);\r\n    const containerBorder = border[dir](containerStyle);\r\n\r\n    let sourceDistance = source.getBoundingClientRect()[dir] + pixelToNumber(sourceMargin);\r\n    let containerDistance = container.getBoundingClientRect()[dir] - pixelToNumber(containerPadding) - pixelToNumber(containerBorder);\r\n\r\n    return delta(sourceDistance, containerDistance) < 2;\r\n}\r\n\r\n\r\n/**\r\n * Gets the first visible element\r\n * @param {HTMLElement} parent \r\n */\r\nexport function getVisibleElement(parent) {\r\n    for (let i = 0; i < parent.children.length; i++) {\r\n        const element = parent.children[i];\r\n\r\n        if (!isHidden(element)) {\r\n            return element;\r\n        }\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\n/**\r\n * Get closest element from a direction inside an optional container\r\n * @param {HTMLElement} source \r\n * @param {string} dir \r\n * @param {HTMLElement} container \r\n * @param {boolean} relative \r\n */\r\nexport function getClosest(source, dir, container, relative) {\r\n    if (dir === \"up\") {\r\n        return getElementTop(source, container, relative);\r\n    } else if (dir === \"down\") {\r\n        return getElementBottom(source, container, relative);\r\n    } else if (dir === \"left\") {\r\n        return getElementLeft(source, container, relative);\r\n    } else if (dir === \"right\") {\r\n        return getElementRight(source, container, relative);\r\n    }\r\n\r\n    console.error(\"unknown direction\", dir);\r\n\r\n    return null;\r\n}\r\n\r\n\r\n/**\r\n * Get closest element above a source element inside an optional container\r\n * @param {HTMLElement} source \r\n * @param {HTMLElement} container \r\n * @param {boolean} relative \r\n */\r\nexport function getElementTop(source, container, relative = true) {\r\n    const items = container.children;\r\n\r\n    const { top: top1, left: left1 } = source.getBoundingClientRect();\r\n\r\n    if (relative && isClosestTo(source, container, \"top\")) {\r\n        return null;\r\n    }\r\n\r\n    let closest = null;\r\n\r\n    let vdist = 99999;\r\n    let hdist = 99999;\r\n\r\n    for (let i = 0; i < items.length; i++) {\r\n        const item = items[i];\r\n\r\n        if (isHidden(item) || item.classList.contains(\"badge\") || item === source) {\r\n            continue;\r\n        }\r\n\r\n        const { bottom: bottom2, left: left2 } = item.getBoundingClientRect();\r\n\r\n        let $vdist = Math.abs(top1 - bottom2);\r\n        let $hdist = Math.abs(left1 - left2);\r\n\r\n        if (top1 >= (bottom2 - 1) && ($vdist < vdist || ($vdist === vdist && $hdist < hdist))) {\r\n            closest = item;\r\n            vdist = $vdist;\r\n            hdist = $hdist;\r\n        }\r\n    }\r\n\r\n    return closest;\r\n}\r\n\r\n\r\n\r\n/**\r\n * Get closest element on the left of a source element inside an optional container\r\n * @param {HTMLElement} source \r\n * @param {HTMLElement} container \r\n */\r\nexport function getElementLeft(source, container, relative = true) {\r\n    const items = container.children;\r\n\r\n    const { top: top1, left: left1 } = source.getBoundingClientRect();\r\n\r\n    if (relative && isClosestTo(source, container, \"left\")) {\r\n        return null;\r\n    }\r\n\r\n    let closest = null;\r\n\r\n    let vdist = 99999;\r\n    let hdist = 99999;\r\n\r\n    for (let i = 0; i < items.length; i++) {\r\n        const item = items[i];\r\n\r\n        if (isHidden(item) || item.classList.contains(\"badge\") || item === source) {\r\n            continue;\r\n        }\r\n\r\n        const { top: top2, right: right2 } = item.getBoundingClientRect();\r\n\r\n        let $vdist = Math.abs(top1 - top2);\r\n        let $hdist = Math.abs(left1 - right2);\r\n\r\n        if (left1 >= (right2 - 1) && ($hdist < hdist || ($hdist === hdist && $vdist < vdist))) {\r\n            closest = item;\r\n            vdist = $vdist;\r\n            hdist = $hdist;\r\n        }\r\n    }\r\n\r\n    return closest;\r\n}\r\n\r\n/**\r\n * Get closest element on the right of a source element inside an optional container\r\n * @param {HTMLElement} source \r\n * @param {HTMLElement} container \r\n */\r\nexport function getElementRight(source, container, relative = true) {\r\n    const items = container.children;\r\n\r\n    const { top: top1, right: right1 } = source.getBoundingClientRect();\r\n\r\n    if (relative && isClosestTo(source, container, \"right\")) {\r\n        return null;\r\n    }\r\n\r\n    let closest = null;\r\n\r\n    let vdist = 99999;\r\n    let hdist = 99999;\r\n\r\n    for (let i = 0; i < items.length; i++) {\r\n        const item = items[i];\r\n\r\n        if (isHidden(item) || item.classList.contains(\"badge\") || item === source) {\r\n            continue;\r\n        }\r\n\r\n        const { top: top2, left: left2 } = item.getBoundingClientRect();\r\n\r\n        let $vdist = Math.abs(top1 - top2);\r\n        let $hdist = Math.abs(right1 - left2);\r\n\r\n        if (right1 <= (left2 + 1) && ($hdist < hdist || ($hdist === hdist && $vdist < vdist))) {\r\n            closest = item;\r\n            vdist = $vdist;\r\n            hdist = $hdist;\r\n        }\r\n    }\r\n\r\n    return closest;\r\n}\r\n\r\n\r\n/**\r\n * Get closest element below a source element inside an optional container\r\n * @param {HTMLElement} source \r\n * @param {HTMLElement} container \r\n */\r\nexport function getElementBottom(source, container, relative = true) {\r\n    const items = container.children;\r\n\r\n    const { bottom: bottom1, left: left1 } = source.getBoundingClientRect();\r\n\r\n    if (relative && isClosestTo(source, container, \"bottom\")) {\r\n        return null;\r\n    }\r\n\r\n    let closest = null;\r\n\r\n    let vdist = 99999;\r\n    let hdist = 99999;\r\n\r\n    for (let i = 0; i < items.length; i++) {\r\n        const item = items[i];\r\n\r\n        if (isHidden(item) || item.classList.contains(\"badge\") || item === source) {\r\n            continue;\r\n        }\r\n\r\n        const { top: top2, left: left2 } = item.getBoundingClientRect();\r\n\r\n        let $vdist = Math.abs(bottom1 - top2);\r\n        let $hdist = Math.abs(left1 - left2);\r\n\r\n        if (bottom1 <= (top2 + 1) && ($vdist < vdist || ($vdist === vdist && $hdist < hdist))) {\r\n            closest = item;\r\n            vdist = $vdist;\r\n            hdist = $hdist;\r\n        }\r\n    }\r\n\r\n    return closest;\r\n}\r\n\r\n\r\n/**\r\n * Returns the closest element to the top of its parent container\r\n * @param {HTMLElement} container \r\n * @returns {HTMLElement|null} The closest element to the top.\r\n */\r\nexport function getTopElement(container, pred) {\r\n    const items = container.children;\r\n\r\n    const { top: top1, left: left1 } = container.getBoundingClientRect();\r\n\r\n    if (items.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    const usePred = isFunction(pred);\r\n    let closest = null;\r\n\r\n    let vdist = 99999;\r\n    let hdist = 99999;\r\n\r\n    for (let i = 0; i < items.length; i++) {\r\n        const item = items[i];\r\n\r\n        if (usePred && !pred(item)) {\r\n            continue;\r\n        }\r\n\r\n        if (isHidden(item) || item.classList.contains(\"badge\")) {\r\n            continue;\r\n        }\r\n\r\n        const { top: top2, left: left2 } = item.getBoundingClientRect();\r\n\r\n        let $vdist = Math.abs(top1 - top2);\r\n        let $hdist = Math.abs(left1 - left2);\r\n\r\n        if (top1 <= (top2 + 1) && ($vdist < vdist || ($vdist === vdist && $hdist < hdist))) {\r\n            closest = item;\r\n            vdist = $vdist;\r\n            hdist = $hdist;\r\n        }\r\n    }\r\n\r\n    return closest;\r\n}\r\n\r\n/**\r\n * Returns the closest element to the left side of its parent container\r\n * @param {HTMLElement} container \r\n * @returns {HTMLElement|null} The closest element to the left side.\r\n */\r\nexport function getLeftElement(container, pred) {\r\n    const items = container.children;\r\n\r\n    const { top: top1, left: left1 } = container.getBoundingClientRect();\r\n\r\n    if (items.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    const usePred = isFunction(pred);\r\n    let closest = null;\r\n\r\n    let vdist = 99999;\r\n    let hdist = 99999;\r\n\r\n    for (let i = 0; i < items.length; i++) {\r\n        const item = items[i];\r\n\r\n        if (usePred && !pred(item)) {\r\n            continue;\r\n        }\r\n\r\n        if (isHidden(item) || item.classList.contains(\"badge\")) {\r\n            continue;\r\n        }\r\n\r\n        const { top: top2, left: left2 } = item.getBoundingClientRect();\r\n\r\n        let $vdist = Math.abs(top1 - top2);\r\n        let $hdist = Math.abs(left1 - left2);\r\n\r\n        if (left1 <= (left2 + 1) && ($hdist < hdist || ($hdist === hdist && $vdist < vdist))) {\r\n            closest = item;\r\n            vdist = $vdist;\r\n            hdist = $hdist;\r\n        }\r\n    }\r\n\r\n    return closest;\r\n}\r\n\r\n/**\r\n * Returns the closest element to the right side of its parent container\r\n * @param {HTMLElement} container \r\n * @returns {HTMLElement|null} The closest element to the right side.\r\n */\r\nexport function getRightElement(container, pred) {\r\n    const items = container.children;\r\n\r\n    const { top: top1, right: right1 } = container.getBoundingClientRect();\r\n\r\n    if (items.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    const usePred = isFunction(pred);\r\n    let closest = null;\r\n\r\n    let vdist = 99999;\r\n    let hdist = 99999;\r\n\r\n    for (let i = 0; i < items.length; i++) {\r\n        const item = items[i];\r\n\r\n        if (usePred && !pred(item)) {\r\n            continue;\r\n        }\r\n\r\n        if (isHidden(item) || item.classList.contains(\"badge\")) {\r\n            continue;\r\n        }\r\n\r\n        const { top: top2, right: right2 } = item.getBoundingClientRect();\r\n\r\n        let $vdist = Math.abs(top1 - top2);\r\n        let $hdist = Math.abs(right1 - right2);\r\n\r\n        if (right1 >= (right2 - 1) && ($hdist < hdist || ($hdist === hdist && $vdist < vdist))) {\r\n            closest = item;\r\n            vdist = $vdist;\r\n            hdist = $hdist;\r\n        }\r\n    }\r\n\r\n    return closest;\r\n}\r\n\r\n/**\r\n * Returns the closest element to the bottom of its parent container\r\n * @param {HTMLElement} container \r\n * @returns {HTMLElement|null} The closest element to the bottom.\r\n */\r\nexport function getBottomElement(container, pred) {\r\n    const items = container.children;\r\n\r\n    const { bottom: bottom1, left: left1 } = container.getBoundingClientRect();\r\n\r\n    if (items.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    const usePred = isFunction(pred);\r\n    let closest = null;\r\n\r\n    let vdist = 99999;\r\n    let hdist = 99999;\r\n\r\n    for (let i = 0; i < items.length; i++) {\r\n        const item = items[i];\r\n\r\n        if (usePred && !pred(item)) {\r\n            continue;\r\n        }\r\n\r\n        if (isHidden(item) || item.classList.contains(\"badge\")) {\r\n            continue;\r\n        }\r\n\r\n        const { bottom: bottom2, left: left2 } = item.getBoundingClientRect();\r\n\r\n        let $vdist = Math.abs(bottom1 - bottom2);\r\n        let $hdist = Math.abs(left1 - left2);\r\n\r\n        if (bottom1 >= (bottom2 - 1) && ($vdist < vdist || ($vdist === vdist && $hdist < hdist))) {\r\n            closest = item;\r\n            vdist = $vdist;\r\n            hdist = $hdist;\r\n        }\r\n    }\r\n\r\n    return closest;\r\n}\r\n","import { isObject, isNullOrUndefined, isIterable, isNullOrWhitespace, isString } from '@std/index.js';\r\nimport { isHTMLElement } from './dom-parse.js';\r\n\r\n\r\n/**\r\n * Removes additional spaces in class attribute\r\n * @param {string} val class attribute's value\r\n * @returns {string} formatted value\r\n * @private\r\n */\r\nconst formatClass = (val) => val.replace(/\\s+/g, ' ').trim();\r\n\r\n\r\n/**\r\n * Add classes to an element\r\n * @param {HTMLElement} element \r\n * @param {string|string[]} value \r\n * @private\r\n * @memberof DOM\r\n */\r\nfunction addClass(element, value) {\r\n    if (!isIterable(value)) {\r\n        throw new TypeError(\"Bad argument: The passed `value` argument is not a string or array\");\r\n    }\r\n\r\n    if (Array.isArray(value)) {\r\n        element.classList.add(...value);\r\n    } else {\r\n        let formattedValue = formatClass(value);\r\n\r\n        if (isNullOrWhitespace(element.className)) {\r\n            element.className = formattedValue;\r\n        } else {\r\n            addClass(element, formattedValue.split(' '));\r\n        }\r\n    }\r\n\r\n    return element;\r\n}\r\n\r\n/**\r\n * Assigns a value to an attribute\r\n * @param {HTMLElement} element \r\n * @param {string} key \r\n * @param {string} value \r\n * @private\r\n */\r\nfunction assign(element, key, value) {\r\n    element[key] = value;\r\n}\r\n\r\n/**\r\n * Assigns a value to an attribute\r\n * @param {HTMLElement} element \r\n * @param {string} key \r\n * @param {Object} value \r\n * @private\r\n */\r\nfunction assignObject(element, key, value) {\r\n    Object.assign(element[key], value);\r\n}\r\n\r\n/**\r\n * Assigns a value to an attribute\r\n * @param {HTMLElement} element \r\n * @param {string} key \r\n * @param {Object} value \r\n * @private\r\n */\r\nfunction assignAttribute(element, key, value) {\r\n    element.setAttribute(key, value);\r\n}\r\n\r\nconst GLOBAL_ATTRIBUTES = \"accesskey,autocapitalize,class,dataset,editable,draggable,hidden,id,inputmode,lang,style,tabindex,title\";\r\n\r\nconst AttributeHandler = {\r\n    // Global attributes\r\n    accesskey: [assign, 'accessKey'],\r\n    autocapitalize: [assign, 'autocapitalize'],\r\n    class: [addClass],\r\n    dataset: [assignObject, 'dataset'],\r\n    draggable: [assign, 'draggable'],\r\n    editable: [assign, 'contentEditable'],\r\n    hidden: [assign, 'hidden'],\r\n    id: [assign, 'id'],\r\n    inputmode: [assign, 'inputMode'],\r\n    lang: [assign, 'lang'],\r\n    html: [assign, 'innerHTML'],\r\n    style: [assign, 'style'],\r\n    tabindex: [assign, 'tabIndex'],\r\n    text: [assign, 'textContent'],\r\n    title: [assign, 'title'],\r\n    // Anchor attributes\r\n    download: [assign, 'download'],\r\n    ping: [assign, 'ping'],\r\n    target: [assign, 'target'],\r\n    // Area attributes\r\n    coords: [assign, 'coords'],\r\n    shape: [assign, 'shape'],\r\n    // Audio/Video attributes\r\n    autoplay: [assign, 'autoplay'],\r\n    buffered: [assign, 'buffered'],\r\n    controls: [assign, 'controls'],\r\n    loop: [assign, 'loop'],\r\n    muted: [assign, 'muted'],\r\n    playsinline: [assignAttribute, 'playsinline'],\r\n    poster: [assign, 'poster'],\r\n    preload: [assign, 'preload'],\r\n    // Form attributes\r\n    accept: [assign, 'accept'],\r\n    \"accept-charset\": [assign, 'acceptCharset'],\r\n    action: [assign, 'action'],\r\n    autocomplete: [assign, 'autocomplete'],\r\n    autofocus: [assign, 'autofocus'],\r\n    capture: [assign, 'capture'],\r\n    checked: [assign, 'checked'],\r\n    cols: [assign, 'cols'],\r\n    disabled: [assign, 'disabled'],\r\n    dirname: [assign, 'dirName'],\r\n    enctype: [assign, 'enctype'],\r\n    for: [assign, 'htmlFor'],\r\n    form: [assign, 'form'],\r\n    formaction: [assign, 'formAction'],\r\n    formenctype: [assign, 'formEnctype'],\r\n    formmethod: [assign, 'formMethod'],\r\n    formnovalidate: [assign, 'formNoValidate'],\r\n    formtarget: [assign, 'formTarget'],\r\n    high: [assign, 'high'],\r\n    label: [assign, 'label'],\r\n    list: [assign, 'list'],\r\n    low: [assign, 'low'],\r\n    max: [assign, 'max'],\r\n    maxlength: [assign, 'maxLength'],\r\n    method: [assign, 'method'],\r\n    min: [assign, 'min'],\r\n    minlength: [assign, 'minLength'],\r\n    multiple: [assign, 'multiple'],\r\n    novalidate: [assign, 'noValidate'],\r\n    optimum: [assign, 'optimum'],\r\n    pattern: [assign, 'pattern'],\r\n    placeholder: [assign, 'placeholder'],\r\n    readonly: [assign, 'readOnly'],\r\n    required: [assign, 'required'],\r\n    rows: [assign, 'rows'],\r\n    selected: [assign, 'selected'],\r\n    size: [assign, 'size'],\r\n    spellcheck: [assignAttribute, 'spellcheck'],\r\n    step: [assign, 'step'],\r\n    wrap: [assign, 'wrap'],\r\n    // Image attributes\r\n    crossorigin: [assign, 'crossOrigin'],\r\n    decoding: [assign, 'decoding'],\r\n    height: [assign, 'height'],\r\n    ismap: [assign, 'isMap'],\r\n    loading: [assign, 'loading'],\r\n    srcset: [assign, 'srcset'],\r\n    width: [assign, 'width'],\r\n    // Link attributes\r\n    alt: [assign, 'alt'],\r\n    as: [assign, 'as'],\r\n    media: [assign, 'media'],\r\n    rel: [assign, 'rel'],\r\n    src: [assign, 'src'],\r\n    sizes: [assign, 'sizes'],\r\n    // List attributes\r\n    reversed: [assign, 'reversed'],\r\n    start: [assign, 'start'],\r\n    // Meta attributes\r\n    charset: [assignAttribute, 'charset'],\r\n    content: [assign, 'content'],\r\n    \"http-equiv\": [assign, 'httpEquiv'],\r\n    // Object attributes\r\n    data: [assign, 'data'],\r\n    // Quote attributes\r\n    cite: [assign, 'cite'],\r\n    // Table attributes\r\n    abbr: [assign, 'abbr'],\r\n    colspan: [assign, 'colSpan'],\r\n    span: [assign, 'span'],\r\n    rowspan: [assign, 'rowSpan'],\r\n    scope: [assign, 'scope'],\r\n    // Track attributes\r\n    default: [assign, 'default'],\r\n    kind: [assign, 'kind'],\r\n    srclang: [assign, 'srclang'],\r\n    // Mix attributes\r\n    href: [assign, 'href'],\r\n    hreflang: [assign, 'hreflang'],\r\n    datetime: [assign, 'dateTime'],\r\n    name: [assign, 'name'],\r\n    type: [assign, 'type'],\r\n    value: [assign, 'value'],\r\n    usemap: [assign, 'useMap'],\r\n};\r\n\r\n\r\n/**\r\n * Sets the attributes of an element\r\n * @param {!HTMLElement} element element\r\n * @param {Object} attribute attribute\r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport function addAttributes(element, attribute, validAttributes) {\r\n    if (!isHTMLElement(element)) {\r\n        throw new TypeError(\"Bad argument: The given 'element' argument is not a valid HTML Element\");\r\n    }\r\n\r\n    if (!isObject(attribute)) {\r\n        return element;\r\n    }\r\n\r\n    const isValid = (key) => GLOBAL_ATTRIBUTES.includes(key) || isNullOrUndefined(validAttributes) || validAttributes.includes(key);\r\n\r\n    for (const key of Object.keys(attribute)) {\r\n        if (isValid(key)) {\r\n            let value = attribute[key];\r\n            let args = AttributeHandler[key].slice(0);\r\n            let fn = args.shift();\r\n\r\n            if (!isNullOrUndefined(value)) {\r\n                fn(element, ...args, value);\r\n            }\r\n        }\r\n    }\r\n\r\n    return element;\r\n}\r\n\r\n/**\r\n * Changes the selected option of a `<select>` element\r\n * @param {!HTMLSelectElement} select\r\n * @param {!string} optValue option value to select\r\n * @returns {boolean} value indicating whether the option was found and selected\r\n * @memberof DOM\r\n */\r\nexport function changeSelectedValue(select, optValue) {\r\n    if (!isHTMLElement(select, \"select\")) {\r\n        throw new TypeError(\"Bad argument: The given 'select' argument is not a valid HTML Select element\");\r\n    }\r\n\r\n    if (!(isString(optValue) || isObject(optValue))) {\r\n        throw new TypeError(\"Bad argument: The given 'optValue' argument is a null or undefined\");\r\n    }\r\n\r\n    /**\r\n     * Object equality\r\n     * @param {HTMLOptionElement} option \r\n     * @param {*} obj \r\n     */\r\n    const objectEq = (option, obj) => option.value === obj.value || option.text === obj.text;\r\n\r\n    /**\r\n     * String equality\r\n     * @param {HTMLOptionElement} option \r\n     * @param {string} obj \r\n     */\r\n    const stringEq = (option, value) => option.value === value;\r\n\r\n    const eqHandler = isString(optValue) ? stringEq : objectEq;\r\n\r\n    const { options, multiple } = select;\r\n\r\n    for (let i = 0; i < options.length; i++) {\r\n        let option = options[i];\r\n\r\n        if (eqHandler(option, optValue)) {\r\n            if (!multiple) {\r\n                Array.from(select.selectedOptions).forEach(opt => opt.selected = false);\r\n            }\r\n            option.selected = true;\r\n\r\n            return true;\r\n        }\r\n    }\r\n\r\n    return false;\r\n}","import { isNullOrUndefined, isObject, valOrDefault, isIterable, isString } from \"@std/index.js\";\r\nimport { isHTMLElement, isNode } from \"./dom-parse.js\";\r\nimport { addAttributes } from \"./element-manip.js\";\r\n\r\n\r\n/**\r\n * Creates an empty element with attributes\r\n * @param {string} tagName \r\n * @param {string} [_validAttributes] \r\n * @param {object} [_attributes] \r\n * @returns {HTMLElement}\r\n * @private\r\n */\r\n/* istanbul ignore next */\r\nfunction createEmptyElement(tagName, _validAttributes, _attributes) {\r\n    const element = document.createElement(tagName);\r\n\r\n    if (!isHTMLElement(element)) {\r\n        return null;\r\n    }\r\n\r\n    if (isObject(_attributes)) {\r\n        addAttributes(element, _attributes, valOrDefault(_validAttributes, \"\"));\r\n    }\r\n\r\n    return element;\r\n}\r\n\r\n/**\r\n * Creates an element with attributes and content\r\n * @param {string} tagName \r\n * @param {string} [_validAttributes] \r\n * @param {Function} [contentResolver] \r\n * @param {object} [_attributes] \r\n * @param {Text|HTMLElement|HTMLElement[]} [_content] \r\n * @returns {HTMLElement}\r\n * @private\r\n */\r\n/* istanbul ignore next */\r\nfunction createElement(tagName, _validAttributes, _attributes, _content) {\r\n    const element = createEmptyElement(tagName, _validAttributes, _attributes);\r\n\r\n    if (!isHTMLElement(element)) {\r\n        return null;\r\n    }\r\n\r\n    if (!isNullOrUndefined(_content)) {\r\n        addContent(element, _content);\r\n    }\r\n\r\n    return element;\r\n}\r\n\r\n\r\n// TODO: createScript\r\n\r\n// TODO: createStyle\r\n\r\n/**\r\n * Creates a document fragment\r\n * @function createDocFragment\r\n * @returns {DocumentFragment}\r\n * @memberof DOM\r\n */\r\nexport function createDocFragment(_children) {\r\n    var fragment = document.createDocumentFragment();\r\n\r\n    if (!isNullOrUndefined(_children)) {\r\n        addContent(fragment, _children);\r\n    }\r\n\r\n    return fragment;\r\n}\r\n\r\n/**\r\n * Creates a text node\r\n * @function createTextNode\r\n * @param {string} text\r\n * @returns {Text}\r\n * @memberof DOM\r\n */\r\nexport const createTextNode = (text) => document.createTextNode(text);\r\n\r\n\r\n/******************************************************************************\r\n * Metadata Element\r\n *****************************************************************************/\r\n\r\n/**\r\n * Creates an `<base>` element with some attributes\r\n * @function createBase\r\n * @param {object} _attribute \r\n * @returns {HTMLBaseElement}\r\n * @memberof DOM\r\n */\r\nexport const createBase = createEmptyElement.bind(null, \"base\", \"href,target\");\r\n\r\n/**\r\n * Creates a `<link>` element with some attributes\r\n * @function createLink\r\n * @param {object} _attribute Global attributes\r\n * @returns {HTMLLinkElement}\r\n * @memberof DOM\r\n */\r\nexport const createLink = createEmptyElement.bind(null, \"link\", \"as,crossorigin,disabled,href,hreflang,media,rel,sizes,type\");\r\n\r\n/**\r\n * Creates a `<meta>` element with some attributes\r\n * @function createLink\r\n * @param {object} _attribute Global attributes\r\n * @returns {HTMLMetaElement}\r\n * @memberof DOM\r\n */\r\nexport const createMeta = createEmptyElement.bind(null, \"meta\", \"charset,content,http-equiv,name\");\r\n\r\n/**\r\n * Creates a `<title>` element with some attributes\r\n * @function createTemplate\r\n * @param {object} _attribute Global attributes\r\n * @param {Text|HTMLElement|HTMLElement[]} _children Content\r\n * @returns {HTMLTitleElement}\r\n * @memberof DOM\r\n */\r\nexport const createTitle = createElement.bind(null, \"title\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<template>` element with some attributes\r\n * @function createTemplate\r\n * @param {object} _attribute Global attributes\r\n * @param {Text|HTMLElement|HTMLElement[]} _children Content\r\n * @returns {HTMLTemplateElement}\r\n * @memberof DOM\r\n */\r\nexport const createTemplate = createElement.bind(null, \"template\", \"html,text\");\r\n\r\n\r\n/******************************************************************************\r\n * Sectionning Element\r\n *****************************************************************************/\r\n\r\n/**\r\n * Creates a `<header>` element with some attributes\r\n * @function createHeader\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createHeader = createElement.bind(null, \"header\", \"html,text\");\r\n\r\n/**\r\n * Creates an `<footer>` element with some attributes\r\n * @function createFooter\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createFooter = createElement.bind(null, \"footer\", \"html,text\");\r\n\r\n/**\r\n * Creates an `<main>` element with some attributes\r\n * @function createMain\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createMain = createElement.bind(null, \"main\", \"html,text\");\r\n\r\n/**\r\n * Creates an `<article>` element with some attributes\r\n * @function createArticle\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createArticle = createElement.bind(null, \"article\", \"html,text\");\r\n\r\n/**\r\n * Creates an `<section>` element with some attributes\r\n * @function createSection\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createSection = createElement.bind(null, \"section\", \"html,text\");\r\n\r\n/**\r\n * Creates an `<nav>` element with some attributes\r\n * @function createNav\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createNav = createElement.bind(null, \"nav\", \"html,text\");\r\n\r\n/**\r\n * Creates an `<aside>` element with some attributes\r\n * @function createAside\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createAside = createElement.bind(null, \"aside\", \"html,text\");\r\n\r\n\r\n/******************************************************************************\r\n * Heading Element\r\n *****************************************************************************/\r\n\r\n/**\r\n * Creates a `<h1>` element with some attributes\r\n * @function createH1\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLHeadingElement}\r\n * @memberof DOM\r\n */\r\nexport const createH1 = createElement.bind(null, \"h1\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<h2>` element with some attributes\r\n * @function createH2\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLHeadingElement}\r\n * @memberof DOM\r\n */\r\nexport const createH2 = createElement.bind(null, \"h2\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<h3>` element with some attributes\r\n * @function createH3\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLHeadingElement}\r\n * @memberof DOM\r\n */\r\nexport const createH3 = createElement.bind(null, \"h3\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<h4>` element with some attributes\r\n * @function createH4\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLHeadingElement}\r\n * @memberof DOM\r\n */\r\nexport const createH4 = createElement.bind(null, \"h4\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<h5>` element with some attributes\r\n * @function createH5\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLHeadingElement}\r\n * @memberof DOM\r\n */\r\nexport const createH5 = createElement.bind(null, \"h5\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<h6>` element with some attributes\r\n * @function createH6\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLHeadingElement}\r\n * @memberof DOM\r\n */\r\nexport const createH6 = createElement.bind(null, \"h6\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<div>` element with some attributes\r\n * @function createDiv\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLDivElement}\r\n * @memberof DOM\r\n */\r\nexport const createDiv = createElement.bind(null, \"div\", \"html,text\");\r\n\r\n\r\n\r\n/**\r\n * Creates a `<br>` element \\\r\n * Line break (carriage-return)\r\n * @function createLineBreak\r\n * @returns {HTMLBRElement}\r\n * @memberof DOM\r\n */\r\nexport const createLineBreak = createEmptyElement.bind(null, \"br\", \"\");\r\n\r\n/**\r\n * Creates a `<hr>` element \\\r\n * Thematic break\r\n * @function createThematicBreak\r\n * @returns {HTMLHRElement}\r\n * @memberof DOM\r\n */\r\nexport const createThematicBreak = createEmptyElement.bind(null, \"hr\", \"\");\r\n\r\n/**\r\n * Creates a `<p>` element with some attributes\r\n * @function createParagraph\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLParagraphElement}\r\n * @memberof DOM\r\n */\r\nexport const createParagraph = createElement.bind(null, \"p\", \"html,text\");\r\n\r\n\r\n/**\r\n * Creates a `<blockquote>` element with some attributes\r\n * @function createBlockQuotation\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLQuoteElement}\r\n * @memberof DOM\r\n */\r\nexport const createBlockQuotation = createElement.bind(null, \"blockquote\", \"cite,html,text\");\r\n\r\n/**\r\n * Creates a `<ul>` element with some attributes\r\n * @function createUnorderedList\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLUListElement}\r\n * @memberof DOM\r\n */\r\nexport const createUnorderedList = createElement.bind(null, \"ul\", \"html\");\r\n\r\n/**\r\n * Creates a `<ol>` element with some attributes\r\n * @function createOrderedList\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLOListElement}\r\n * @memberof DOM\r\n */\r\nexport const createOrderedList = createElement.bind(null, \"ol\", \"html,reversed,start,type\");\r\n\r\n/**\r\n * Creates a `<li>` element with some attributes\r\n * @function createListItem\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLLIElement}\r\n * @memberof DOM\r\n */\r\nexport const createListItem = createElement.bind(null, \"li\", \"html,text,value\");\r\n\r\n\r\n/**\r\n * Creates a `<dl>` element with some attributes\r\n * @function createDescriptionList\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLDListElement}\r\n * @memberof DOM\r\n */\r\nexport const createDescriptionList = createElement.bind(null, \"dl\", \"html\");\r\n\r\n/**\r\n * Creates a `<dt>` element with some attributes\r\n * @function createDescriptionTerm\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createDescriptionTerm = createElement.bind(null, \"dt\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<dd>` element with some attributes\r\n * @function createDescriptionDetails\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createDescriptionDetails = createElement.bind(null, \"dd\", \"html,text\");\r\n\r\n/******************************************************************************\r\n * Inline Element\r\n *****************************************************************************/\r\n\r\n/**\r\n * Creates an `<a>` element with some attributes\r\n * @function createAnchor\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLAnchorElement}\r\n * @memberof DOM\r\n */\r\nexport const createAnchor = createElement.bind(null, \"a\", \"download,href,hreflang,html,ping,rel,target,text,type\");\r\n\r\n/**\r\n * Creates an `<area>` element with some attributes\r\n * @function createArea\r\n * @param {object} _attribute \r\n * @returns {HTMLAreaElement}\r\n * @memberof DOM\r\n */\r\nexport const createArea = createEmptyElement.bind(null, \"area\", \"alt,coords,download,href,hreflang,media,ping,rel,shape,target\");\r\n\r\n\r\n/******************************************************************************\r\n * Embedded Element\r\n *****************************************************************************/\r\n\r\n/**\r\n * Creates a `<audio>` element with some attributes\r\n * @function createAudio\r\n * @param {object} _attribute\r\n * @param {Text|HTMLElement|HTMLElement[]} _children\r\n * @returns {HTMLAudioElement}\r\n * @memberof DOM\r\n */\r\nexport const createAudio = createElement.bind(null, \"audio\", \"autoplay,controls,crossorigin,html,loop,muted,preload,src,text\");\r\n\r\n/**\r\n * Creates a `<img>` element with some attributes\r\n * @function createImage\r\n * @param {object} _attribute \r\n * @returns {HTMLImageElement}\r\n * @memberof DOM\r\n */\r\nexport const createImage = createEmptyElement.bind(null, \"img\", \"alt,crossorigin,decoding,height,ismap,loading,sizes,src,srcset,usemap,width\");\r\n\r\n/**\r\n * Creates a `<embed>` element with some attributes\r\n * @function createEmbed\r\n * @param {object} _attribute \r\n * @returns {HTMLEmbedElement}\r\n * @memberof DOM\r\n */\r\nexport const createEmbed = createEmptyElement.bind(null, \"embed\", \"height,src,type,width\");\r\n\r\n/**\r\n * Creates a `<figure>` element with some attributes\r\n * @function createFigure\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createFigure = createElement.bind(null, \"figure\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<figcaption>` element with some attributes\r\n * @function createFigureCaption\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createFigureCaption = createElement.bind(null, \"figcaption\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<object>` element with some attributes\r\n * @function createObject\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLObjectElement}\r\n * @memberof DOM\r\n */\r\nexport const createObject = createElement.bind(null, \"object\", \"data,height,html,name,text,type,usemap,width\");\r\n\r\n/**\r\n * Creates a `<picture>` element with some attributes\r\n * @function createPicture\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLPictureElement}\r\n * @memberof DOM\r\n */\r\nexport const createPicture = createElement.bind(null, \"picture\", \"html\");\r\n\r\n/**\r\n * Creates a `<source>` element with some attributes\r\n * @function createSource\r\n * @param {object} _attribute\r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLSourceElement}\r\n * @memberof DOM\r\n */\r\nexport const createSource = createEmptyElement.bind(null, \"source\", \"media,sizes,src,srcset,type\");\r\n\r\n/**\r\n * Creates a `<track>` element with some attributes\r\n * @function createTrack\r\n * @param {object} _attribute \r\n * @returns {HTMLTrackElement}\r\n * @memberof DOM\r\n */\r\nexport const createTrack = createEmptyElement.bind(null, \"track\", \"default,kind,label,src,srclang\");\r\n\r\n/**\r\n * Creates a `<video>` element with some attributes\r\n * @function createVideo\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLVideoElement}\r\n * @memberof DOM\r\n */\r\nexport const createVideo = createElement.bind(null, \"video\", \"autoplay,controls,crossorigin,height,html,loop,muted,playsinline,poster,preload,src,text,width\");\r\n\r\n\r\n/**\r\n * Creates a `<span>` element with some attributes\r\n * @function createSpan\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLSpanElement}\r\n * @memberof DOM\r\n */\r\nexport const createSpan = createElement.bind(null, \"span\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<strong>` element with some attributes\r\n * @function createStrong\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createStrong = createElement.bind(null, \"strong\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<em>` element with some attributes\r\n * @function createEmphasis\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createEmphasis = createElement.bind(null, \"em\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<mark>` element with some attributes\r\n * @function createMark\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createMark = createElement.bind(null, \"mark\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<samp>` element with some attributes\r\n * @function createSample\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createSample = createElement.bind(null, \"samp\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<sub>` element with some attributes\r\n * @function createSubscript\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createSubscript = createElement.bind(null, \"sub\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<sup>` element with some attributes\r\n * @function createSuperscript\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createSuperscript = createElement.bind(null, \"sup\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<del>` element with some attributes\r\n * @function createDeletedPart\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLModElement}\r\n * @memberof DOM\r\n */\r\nexport const createDeletedPart = createElement.bind(null, \"del\", \"cite,datetime\");\r\n\r\n/**\r\n * Creates a `<ins>` element with some attributes\r\n * @function createInsertedPart\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLModElement}\r\n * @memberof DOM\r\n */\r\nexport const createInsertedPart = createElement.bind(null, \"ins\", \"cite,datetime\");\r\n\r\n/**\r\n * Creates a `<q>` element with some attributes\r\n * @function createQuote\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLQuoteElement}\r\n * @memberof DOM\r\n */\r\nexport const createQuote = createElement.bind(null, \"q\", \"cite,html,text\");\r\n\r\n/**\r\n * Creates a `<abbr>` element with some attributes\r\n * @function createAbbreviation\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createAbbreviation = createElement.bind(null, \"abbr\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<b>` element with some attributes\r\n * @function createB\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createB = createElement.bind(null, \"b\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<i>` element with some attributes\r\n * @function createI\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createI = createElement.bind(null, \"i\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<s>` element with some attributes\r\n * @function createS\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createS = createElement.bind(null, \"s\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<u>` element with some attributes\r\n * @function createU\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createU = createElement.bind(null, \"u\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<cite>` element with some attributes\r\n * @function createCite\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createCite = createElement.bind(null, \"cite\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<time>` element with optionally some attributes\r\n * @function createTime\r\n * @param {object} _attribute \r\n * @returns {HTMLTimeElement}\r\n * @memberof DOM\r\n */\r\nexport const createTime = createElement.bind(null, \"time\", \"datetime,html,text\");\r\n\r\n/**\r\n * Creates a `<code>` element with some attributes\r\n * @function createCode\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLElement}\r\n * @memberof DOM\r\n */\r\nexport const createCode = createElement.bind(null, \"code\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<form>` element with some attributes\r\n * @function createForm\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLFormElement}\r\n * @memberof DOM\r\n */\r\nexport const createForm = createElement.bind(null, \"form\", \"accept-charset,action,autocomplete,enctype,html,method,name,novalidate,rel,target,text\");\r\n\r\nconst inputTypes = [\"button\", \"checkbox\", \"color\", \"date\", \"datetime-local\", \"email\", \"file\",\r\n    \"hidden\", \"image\", \"month\", \"number\", \"password\", \"radio\", \"range\", \"reset\",\r\n    \"search\", \"submit\", \"tel\", \"text\", \"time\", \"url\", \"week\"];\r\n\r\n/**\r\n * Creates an `<input>` element with some attributes\r\n * @function createInput\r\n * @param {object} _attribute \r\n * @returns {HTMLInputElement}\r\n * @memberof DOM\r\n */\r\nexport const createInput = createEmptyElement.bind(null, \"input\", \"accept,alt,autocomplete,autofocus,capture,checked,dirname,disabled,height,max,maxlength,minlength,min,multiple,name,pattern,placeholder,readonly,required,size,src,step,type,value,width\");\r\n\r\n/**\r\n * Creates a `<textarea>` element with some attributes\r\n * @function createTextArea\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTextAreaElement}\r\n * @memberof DOM\r\n */\r\nexport const createTextArea = createElement.bind(null, \"textarea\", \"autocomplete,autofocus,cols,disabled,html,maxlength,minlength,name,placeholder,readonly,required,rows,spellcheck,text,value,wrap\");\r\n\r\n/**\r\n * Creates a `<label>` element with some attributes\r\n * @function createLabel\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLLabelElement}\r\n * @memberof DOM\r\n */\r\nexport const createLabel = createElement.bind(null, \"label\", \"for,html,text\");\r\n\r\n/**\r\n * Creates a `<select>` element with some attributes\r\n * @function createSelect\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLSelectElement}\r\n * @memberof DOM\r\n */\r\nexport const createSelect = createElement.bind(null, 'select', \"autocomplete,autofocus,disabled,html,multiple,name,required,size\");\r\n\r\n/**\r\n * Creates a `<option>` element with some attributes\r\n * @function createOption\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLOptionElement}\r\n * @memberof DOM\r\n */\r\nexport const createOption = createElement.bind(null, \"option\", \"disabled,html,label,selected,text,value\");\r\n\r\n/**\r\n * Creates a `<optgroup>` element with some attributes\r\n * @function createOptionGroup\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLOptGroupElement}\r\n * @memberof DOM\r\n */\r\nexport const createOptionGroup = createElement.bind(null, \"optgroup\", \"disabled,html,label\");\r\n\r\n/**\r\n * Creates a `<fieldset>` element with some attributes\r\n * @function createFieldset\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLFieldSetElement}\r\n * @memberof DOM\r\n */\r\nexport const createFieldset = createElement.bind(null, \"fieldset\", \"disabled,html,name,text\");\r\n\r\n/**\r\n * Creates a `<legend>` element with some attributes\r\n * @function createLegend\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLLabelElement}\r\n * @memberof DOM\r\n */\r\nexport const createLegend = createElement.bind(null, \"legend\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<datalist>` element with some attributes\r\n * @function createDataList\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTextAreaElement}\r\n * @memberof DOM\r\n */\r\nexport const createDataList = createElement.bind(null, \"datalist\", \"html\");\r\n\r\n/**\r\n * Creates a `<meter>` element with some attributes\r\n * @function createMeter\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTextAreaElement}\r\n * @memberof DOM\r\n */\r\nexport const createMeter = createElement.bind(null, \"meter\", \"high,html,low,max,min,optimum,text,value\");\r\n\r\n/**\r\n * Creates a `<progress>` element with some attributes\r\n * @function createProgress\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTextAreaElement}\r\n * @memberof DOM\r\n */\r\nexport const createProgress = createElement.bind(null, \"progress\", \"html,max,text,value\");\r\n\r\n/**\r\n * Creates a `<output>` element with optionally some attributes and children elements\r\n * @function createOutput\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTextAreaElement}\r\n * @memberof DOM\r\n */\r\nexport const createOutput = createElement.bind(null, \"output\", \"html,name,text,value\");\r\n\r\nconst buttonTypes = [\"button\", \"submit\", \"reset\"];\r\n\r\n/**\r\n * Creates a `<button>` element with optionally some attributes and children elements\r\n * @function createButton\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLButtonElement}\r\n * @memberof DOM\r\n */\r\nexport const createButton = createElement.bind(null, \"button\", \"autofocus,disabled,formaction,formenctype,formmethod,formnovalidate,formtarget,html,name,text,type,value\");\r\n\r\n/**\r\n * Creates a `<table>` element with some attributes\r\n * @function createTable\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTableElement}\r\n * @memberof DOM\r\n */\r\nexport const createTable = createElement.bind(null, \"table\", \"html\");\r\n\r\n/**\r\n * Creates a `<caption>` element with some attributes\r\n * @function createCaption\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTableCaptionElement}\r\n * @memberof DOM\r\n */\r\nexport const createCaption = createElement.bind(null, \"caption\", \"html,text\");\r\n\r\n/**\r\n * Creates a `<thead>` element with some attributes\r\n * @function createTableHeader\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTableSectionElement}\r\n * @memberof DOM\r\n */\r\nexport const createTableHeader = createElement.bind(null, \"thead\", \"html\");\r\n\r\n/**\r\n * Creates a `<tbody>` element with some attributes\r\n * @function createTableBody\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTableSectionElement}\r\n * @memberof DOM\r\n */\r\nexport const createTableBody = createElement.bind(null, \"tbody\", \"html\");\r\n\r\n/**\r\n * Creates a `<tfoot>` element with some attributes\r\n * @function createTableFooter\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTableSectionElement}\r\n * @memberof DOM\r\n */\r\nexport const createTableFooter = createElement.bind(null, \"tfoot\", \"html\");\r\n\r\n/**\r\n * Creates a `<col>` element with some attributes\r\n * @function createTableColumn\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTableColElement}\r\n * @memberof DOM\r\n */\r\nexport const createTableColumn = createEmptyElement.bind(null, \"col\", \"span\");\r\n\r\n/**\r\n * Creates a `<colgroup>` element with some attributes\r\n * @function createTableColumnGroup\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTableColElement}\r\n * @memberof DOM\r\n */\r\nexport const createTableColumnGroup = createElement.bind(null, \"colgroup\", \"html,span\");\r\n\r\n/**\r\n * Creates a `<tr>` element with some attributes\r\n * @function createTableRow\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTableRowElement}\r\n * @memberof DOM\r\n */\r\nexport const createTableRow = createElement.bind(null, \"tr\", \"html\");\r\n\r\n/**\r\n * Creates a `<th>` element with some attributes\r\n * @function createTableHeaderCell\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children \r\n * @returns {HTMLTableCellElement}\r\n * @memberof DOM\r\n */\r\nexport const createTableHeaderCell = createElement.bind(null, \"th\", \"abbr,colspan,html,rowspan,scope,text\");\r\n\r\n/**\r\n * Creates a `<td>` element with some attributes\r\n * @function createTableCell\r\n * @param {object} _attribute \r\n * @param {Text|HTMLElement|HTMLElement[]} _children\r\n * @returns {HTMLTableCellElement}\r\n * @memberof DOM\r\n */\r\nexport const createTableCell = createElement.bind(null, \"td\", \"colspan,html,rowspan,text\");\r\n\r\n/**\r\n * Appends the children to the element\r\n * @param {Node} element element\r\n * @param {HTMLCollection} content children elements\r\n * @private\r\n * @memberof DOM\r\n */\r\n/* istanbul ignore next */\r\nfunction addContent(element, content) {\r\n    if (!(isNode(content) || isIterable(content))) {\r\n        return element;\r\n    }\r\n\r\n    if (isNode(content) || isString(content)) {\r\n        element.append(content);\r\n    } else {\r\n        element.append(...content);\r\n    }\r\n\r\n    return element;\r\n}","import { isFunction, isNullOrUndefined, valOrDefault, isNullOrWhitespace } from '@std/index.js';\r\nimport { isElement, isHTMLElement, isDocumentFragment, isNode } from './dom-parse.js';\r\n\r\n/**\r\n * Checks whether the selector represents a `class`\r\n * @returns {boolean}\r\n * @private\r\n */\r\nconst isClassSelector = (selector) => /^\\.[a-zA-Z0-9_-]+$/.test(selector);\r\n\r\n/**\r\n * Checks whether the selector represents an `id`\r\n * @returns {boolean}\r\n * @private\r\n */\r\nconst isIdSelector = (selector) => /^#[a-zA-Z0-9_-]+$/.test(selector);\r\n\r\n/**\r\n * Returns the first element within the specified container that matches the \r\n * specified selector, group or selectors.\r\n * @param {!string} selector A DOMString containing one or more selectors to match\r\n * @param {HTMLElement|DocumentFragment} [_container] Container queried\r\n * @returns {HTMLElement|null} The first element matches that matches the specified set of CSS selectors.\r\n * @memberof DOM\r\n */\r\nexport function getElement(selector, _container) {\r\n    const container = isNode(_container) ? _container : document;\r\n\r\n    if (isNullOrWhitespace(selector)) {\r\n        return null;\r\n    }\r\n\r\n    if (isDocumentFragment(container)) {\r\n        return container.querySelector(selector);\r\n    }\r\n\r\n    if (isIdSelector(selector)) {\r\n        return document.getElementById(selector.substring(1));\r\n    }\r\n\r\n    if (isClassSelector(selector)) {\r\n        return container.getElementsByClassName(selector.substring(1))[0];\r\n    }\r\n\r\n    return container.querySelector(selector);\r\n}\r\n\r\n/**\r\n * Returns all elements that match the selector query.\r\n * @param {!string} selector A DOMString containing one or more selectors to match\r\n * @param {HTMLElement|DocumentFragment} [_container] Container queried\r\n * @returns {HTMLCollection|NodeList} A live or *static* (not live) collection of the `container`'s children Element that match the `selector`.\r\n * @memberof DOM\r\n */\r\nexport function getElements(selector, _container) {\r\n    const container = isNode(_container) ? _container : document;\r\n\r\n    if (isNullOrWhitespace(selector)) {\r\n        return null;\r\n    }\r\n\r\n    if (isDocumentFragment(container)) {\r\n        return container.querySelectorAll(selector);\r\n    }\r\n\r\n    if (isClassSelector(selector)) {\r\n        return container.getElementsByClassName(selector.substring(1));\r\n    }\r\n\r\n    return container.querySelectorAll(selector);\r\n}\r\n\r\n/**\r\n * Returns the first Template within the specified container that matches the specified selector, group or selectors.\r\n * @param {string} selector A DOMString containing one or more selectors to match\r\n * @param {HTMLElement} [_container] Container queried\r\n * @returns {HTMLTemplateElement|null} The first Template matches that matches the specified set of CSS selectors.\r\n * @memberof DOM\r\n */\r\nexport function getTemplate(selector, _container) {\r\n    return 'content' in document.createElement('template') ? getElement(selector, _container) : null;\r\n}\r\n\r\n/**\r\n * Returns a duplicate of the template.\r\n * @param {HTMLTemplateElement} template \r\n * @param {boolean} deep used to decide whether the children of the template should also be clone\r\n * @returns {DocumentFragment} The template's clone.\r\n * @memberof DOM\r\n */\r\nexport function cloneTemplate(template, deep) {\r\n    return template ? document.importNode(template.content, valOrDefault(deep, true)) : template;\r\n}\r\n\r\n/**\r\n * Gets the previous or next element of the specified element\r\n * @param {string} dir sibling direction\r\n * @param {HTMLElement} element element\r\n * @returns {(Element|null)} Element or null\r\n * @private\r\n */\r\n/* istanbul ignore next */\r\nfunction getElementSibling(dir, element, pred) {\r\n    if (!isHTMLElement(element)) {\r\n        return null;\r\n    }\r\n\r\n    var sibling = element[dir];\r\n\r\n    if (isFunction(pred)) {\r\n        while (isElement(sibling) && !pred(sibling)) {\r\n            sibling = sibling[dir];\r\n        }\r\n    }\r\n\r\n    return sibling;\r\n}\r\n\r\n/**\r\n * Gets the previous element of the specified one in its parent's children list\r\n * @function getPreviousElementSibling\r\n * @param {HTMLElement} el element\r\n * @param {*} pred Search end condition\r\n * @returns {(Element|null)} Element or null if the specified element is the first one in the list\r\n * @memberof DOM\r\n */\r\nexport const getPreviousElementSibling = getElementSibling.bind(null, \"previousElementSibling\");\r\n\r\n/**\r\n * Gets the element following the specified one in its parent's children list\r\n * @function getNextElementSibling\r\n * @param {HTMLElement} el element\r\n * @param {*} pred Search end condition\r\n * @returns {(Element|null)} Element or null if the specified element is the last one in the list\r\n * @memberof DOM\r\n */\r\nexport const getNextElementSibling = getElementSibling.bind(null, \"nextElementSibling\");\r\n\r\n/**\r\n * Finds an ancestor of an element\r\n * @param {!Element} target \r\n * @param {!Function} pred Decides whether the target is found\r\n * @param {number} [_max] Maximum number of iterations\r\n * @returns {Element|null}\r\n * @memberof DOM\r\n */\r\nexport function findAncestor(target, pred, _max) {\r\n    if (!isElement(target)) {\r\n        throw new TypeError(\"Bad argument: The given target parameter is not a valid HTML Element\");\r\n    }\r\n\r\n    if (!isFunction(pred)) {\r\n        throw new TypeError(\"Bad argument: The given pred parameter is not a valid Function\");\r\n    }\r\n\r\n    var parent = target.parentElement;\r\n\r\n    if (_max > 0) {\r\n        return findAncestorIter(parent, pred, _max - 1);\r\n    }\r\n\r\n    return findAncestorInf(parent, pred);\r\n}\r\n\r\n/**\r\n * Look an ancestor of an element using a callback\r\n * @param {Element} target \r\n * @param {Function} pred Decides whether the target is found\r\n * @private\r\n */\r\n/* istanbul ignore next */\r\nfunction findAncestorInf(target, pred) {\r\n    if (isNullOrUndefined(target)) {\r\n        return null;\r\n    }\r\n\r\n    if (pred(target)) {\r\n        return target;\r\n    }\r\n\r\n    return findAncestorInf(target.parentElement, pred);\r\n}\r\n\r\n/**\r\n * Look for an ancestor of an element using a callback with a maximum number of iteration\r\n * @param {Element} target \r\n * @param {Function} pred Decides whether the target is found\r\n * @param {number} max Maximum number of iterations\r\n * @private\r\n */\r\n/* istanbul ignore next */\r\nfunction findAncestorIter(target, pred, max) {\r\n    if (isNullOrUndefined(target) || max === 0) {\r\n        return null;\r\n    }\r\n\r\n    if (pred(target)) {\r\n        return target;\r\n    }\r\n\r\n    return findAncestorIter(target.parentElement, pred, max - 1);\r\n}","import { isNullOrUndefined } from '@std/index.js';\r\nimport { createTextArea } from './dom-create.js';\r\nimport { isHTMLElement } from './dom-parse.js';\r\n\r\n/**\r\n * Copies selected content to clipboard\r\n * @param {HTMLElement|string} value\r\n * @returns {boolean} Value indicating whether the content has been succesfully copied to the clipboard\r\n * @memberof DOM\r\n */\r\nexport function copytoClipboard(value) {\r\n    if (isNullOrUndefined(value)) {\r\n        return false;\r\n    }\r\n\r\n    var element = createTextArea({\r\n        value: isHTMLElement(value) ? value.textContent : value.toString(),\r\n        readonly: true\r\n    });\r\n\r\n    if(!isHTMLElement(element)) {\r\n        return false;\r\n    }\r\n\r\n    document.body.appendChild(element);\r\n    element.select();\r\n    document.execCommand('copy');\r\n    element.remove();\r\n\r\n    return true;\r\n}","import { isFunction } from '@std/index.js';\r\nimport { isNode } from './dom-parse.js';\r\n\r\n/**\r\n * Removes all children of a node from the DOM or \r\n * those that satisfy the predicate function if given\r\n * @param {!Node} node \r\n * @param {Function} [_callback] Decides whether the node should be removed\r\n * @memberof DOM\r\n */\r\nexport function removeChildren(node, _callback) {\r\n    if (!isNode(node)) {\r\n        throw new TypeError(\"Bad argument: The given `node` is not a valid Node\");\r\n    }\r\n\r\n    if (isFunction(_callback)) {\r\n        Array.from(node.childNodes).forEach(n => {\r\n            if (_callback(n)) {\r\n                node.removeChild(n);\r\n            }\r\n        });\r\n\r\n        return node;\r\n    }\r\n\r\n    return removeAllChildren(node);\r\n\r\n}\r\n\r\n/**\r\n * Removes all children of a node from the DOM\r\n * @param {!Node} node \r\n * @private\r\n */\r\n/* istanbul ignore next */\r\nfunction removeAllChildren(node) {\r\n    while (node.hasChildNodes()) {\r\n        node.removeChild(node.lastChild);\r\n    }\r\n\r\n    return node;\r\n}"],"names":["windowWidth","window","innerWidth","document","documentElement","clientWidth","body","windowHeight","innerHeight","clientHeight","isElementNode","obj","isNullOrUndefined","nodeType","Node","ELEMENT_NODE","isNode","isElement","Element","isHTMLElement","kind","HTMLElement","isIterable","element","kinds","isInstanceOf","hasTag","tag","tagName","toUpperCase","isOfType","type","Array","isArray","includes","some","name","toLowerCase","interfaceName","hasOwn","TagNameMapping","pascalCase","isCollection","isEmpty","isHTMLElementKind","a","br","dl","datalist","fieldset","frameset","hr","h1","h2","h3","h4","h5","h6","li","ol","optgroup","p","q","blockquote","caption","td","th","col","tr","tbody","thead","tfoot","textarea","ul","isDocumentFragment","DOCUMENT_FRAGMENT_NODE","isDocumentFragmentNode","DocumentFragment","_htmlToElement","prop","html","isString","template","createElement","innerHTML","trim","content","htmlToElement","bind","htmlToElements","delta","x","y","Math","abs","margin","top","style","marginTop","right","marginRight","bottom","marginBottom","left","marginLeft","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","border","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","isClosestTo","source","container","dir","sourceStyle","getComputedStyle","containerStyle","sourceMargin","containerPadding","containerBorder","sourceDistance","getBoundingClientRect","pixelToNumber","containerDistance","getElementTop","relative","items","children","top1","left1","closest","vdist","hdist","i","length","item","isHidden","classList","contains","bottom2","left2","$vdist","$hdist","getElementLeft","top2","right2","getElementRight","right1","getElementBottom","bottom1","assign","key","value","assignAttribute","setAttribute","GLOBAL_ATTRIBUTES","AttributeHandler","accesskey","autocapitalize","class","addClass","TypeError","add","formattedValue","replace","isNullOrWhitespace","className","split","dataset","Object","draggable","editable","hidden","id","inputmode","lang","tabindex","text","title","download","ping","target","coords","shape","autoplay","buffered","controls","loop","muted","playsinline","poster","preload","accept","action","autocomplete","autofocus","capture","checked","cols","disabled","dirname","enctype","for","form","formaction","formenctype","formmethod","formnovalidate","formtarget","high","label","list","low","max","maxlength","method","min","minlength","multiple","novalidate","optimum","pattern","placeholder","readonly","required","rows","selected","size","spellcheck","step","wrap","crossorigin","decoding","height","ismap","loading","srcset","width","alt","as","media","rel","src","sizes","reversed","start","charset","data","cite","abbr","colspan","span","rowspan","scope","default","srclang","href","hreflang","datetime","usemap","addAttributes","attribute","validAttributes","isObject","isValid","keys","args","slice","fn","shift","createEmptyElement","_validAttributes","_attributes","valOrDefault","_content","addContent","createBase","createLink","createMeta","createTitle","createTemplate","createHeader","createFooter","createMain","createArticle","createSection","createNav","createAside","createH1","createH2","createH3","createH4","createH5","createH6","createDiv","createLineBreak","createThematicBreak","createParagraph","createBlockQuotation","createUnorderedList","createOrderedList","createListItem","createDescriptionList","createDescriptionTerm","createDescriptionDetails","createAnchor","createArea","createAudio","createImage","createEmbed","createFigure","createFigureCaption","createObject","createPicture","createSource","createTrack","createVideo","createSpan","createStrong","createEmphasis","createMark","createSample","createSubscript","createSuperscript","createDeletedPart","createInsertedPart","createQuote","createAbbreviation","createB","createI","createS","createU","createCite","createTime","createCode","createForm","createInput","createTextArea","createLabel","createSelect","createOption","createOptionGroup","createFieldset","createLegend","createDataList","createMeter","createProgress","createOutput","createButton","createTable","createCaption","createTableHeader","createTableBody","createTableFooter","createTableColumn","createTableColumnGroup","createTableRow","createTableHeaderCell","createTableCell","append","isClassSelector","selector","test","isIdSelector","getElement","_container","querySelector","getElementById","substring","getElementsByClassName","getElementSibling","pred","sibling","isFunction","getPreviousElementSibling","getNextElementSibling","findAncestorInf","parentElement","findAncestorIter","select","optValue","eqHandler","option","options","from","selectedOptions","forEach","opt","deep","importNode","textContent","toString","appendChild","execCommand","remove","_children","fragment","createDocumentFragment","createTextNode","_max","parent","usePred","console","error","querySelectorAll","HTMLCollection","all","inner","outer","NodeList","node","_callback","childNodes","n","removeChild","hasChildNodes","lastChild","removeAllChildren"],"mappings":"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"}